# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`k8s`](#k8s): Sets up a Kubernetes instance - either as a node or as a server
* [`k8s::install::cni_plugins`](#k8s--install--cni_plugins): manages the installation of the cni plugins
* [`k8s::install::container_runtime`](#k8s--install--container_runtime): manages the installation of cri
* [`k8s::install::crictl`](#k8s--install--crictl): installs the crictl debugging tool
* [`k8s::install::kubeadm`](#k8s--install--kubeadm): Installs the kubeadm binary
* [`k8s::install::kubectl`](#k8s--install--kubectl): Installs the kubectl binary
* [`k8s::node`](#k8s--node): Installs a Kubernetes node
* [`k8s::node::kube_proxy`](#k8s--node--kube_proxy): Sets up a on-node kube-proxy instance
* [`k8s::node::kubectl`](#k8s--node--kubectl): Installs the kubectl binary
* [`k8s::node::kubelet`](#k8s--node--kubelet): Installs and configures kubelet
* [`k8s::node::simple_cni`](#k8s--node--simple_cni): Provide a simple bridged standard network interface.
For basic usage if one does not have flannel, cilium, calico or something else yet.
Uses the cni-plugins bridge binary to create a bridge interface to connect the containers
* [`k8s::repo`](#k8s--repo): Handles repositories for the container runtime
* [`k8s::server`](#k8s--server): Sets up a Kubernetes server instance
* [`k8s::server::apiserver`](#k8s--server--apiserver): Installs and configures a Kubernetes apiserver
* [`k8s::server::controller_manager`](#k8s--server--controller_manager): Installs and configures a Kubernetes controller manager
* [`k8s::server::etcd`](#k8s--server--etcd): Sets up an etcd cluster node
* [`k8s::server::etcd::setup`](#k8s--server--etcd--setup): Installs and configures an etcd instance
* [`k8s::server::resources`](#k8s--server--resources): Generates and deploys standard Kubernetes in-cluster services
* [`k8s::server::resources::bootstrap`](#k8s--server--resources--bootstrap): Generates and deploys the default Puppet boostrap configuration into the cluster
* [`k8s::server::resources::coredns`](#k8s--server--resources--coredns): Generates and deploys the default CoreDNS DNS provider for Kubernetes
* [`k8s::server::resources::flannel`](#k8s--server--resources--flannel): Generates and deploys the default CoreDNS DNS provider for Kubernetes
* [`k8s::server::resources::kube_proxy`](#k8s--server--resources--kube_proxy): Generates and deploys the default kube-proxy service for Kubernetes
* [`k8s::server::scheduler`](#k8s--server--scheduler): Installs and configures a Kubernetes scheduler
* [`k8s::server::tls`](#k8s--server--tls): Generates the necessary Kubernetes certificates for a server
* [`k8s::server::wait_online`](#k8s--server--wait_online): Creates a dummy exec to allow deferring applies until the Kubernetes API server has started

### Defined types

* [`k8s::binary`](#k8s--binary): Deploys a Kubernetes binary
* [`k8s::server::bootstrap_token`](#k8s--server--bootstrap_token): Generates and stores a kubelet bootstrap token into the cluster
* [`k8s::server::etcd::member`](#k8s--server--etcd--member): Adds another member to a local etcd cluster
* [`k8s::server::tls::ca`](#k8s--server--tls--ca): Generates a TLS CA
* [`k8s::server::tls::cert`](#k8s--server--tls--cert): Generates and signs a TLS certificate
* [`k8s::server::tls::k8s_sign`](#k8s--server--tls--k8s_sign): Signs pending CSR requests for bootstrapping clients

### Resource types

* [`kubeconfig`](#kubeconfig): Example:  kubeconfig { '/var/lib/kubernetes/utility.conf':   ca_cert => '/etc/kubernetes.ca.pem',   token   => 'utility-token', }
* [`kubectl_apply`](#kubectl_apply): Example:  To encode the bootstrap token "tokenid.tokensecret" into a Kubernetes secret;      $tokenid = 'tokenid'     $tokensecret = 'tokense

### Functions

* [`k8s::format_arguments`](#k8s--format_arguments): Formats a hash of arguments into something that can be passed to a kubernetes application
* [`k8s::format_url`](#k8s--format_url): Formats a download URL for K8s binaries
* [`k8s::ip_in_cidr`](#k8s--ip_in_cidr): Retrieves an IP inside of a CIDR based on an index

### Data types

* [`K8s::Bootstrap_token`](#K8s--Bootstrap_token): A Kubernetes bootstrap token, must be 16-characters lowercase alphanumerical
* [`K8s::CIDR`](#K8s--CIDR): a type to describe one or more IPv4/6 CIDR
* [`K8s::Container_runtimes`](#K8s--Container_runtimes): a type to describe the supported container runtimes
* [`K8s::Duration`](#K8s--Duration): This regexp matches Go duration values, as taken from;
* [`K8s::Ensure`](#K8s--Ensure): a type to describe the ensure pattern
* [`K8s::Extended_key_usage`](#K8s--Extended_key_usage): a type to describe extended key usage for a TLS certificate
* [`K8s::Firewall`](#K8s--Firewall): a type to describe the type of the firewall to use
* [`K8s::IP_addresses`](#K8s--IP_addresses): a type to describe multiple IP addresses without subnet sizes
* [`K8s::Native_packaging`](#K8s--Native_packaging): a type to describe Kubernetes native packaging methods
* [`K8s::Node_auth`](#K8s--Node_auth): a type to describe node/kubelet authentication methods
* [`K8s::PortRange`](#K8s--PortRange): This regexp matches port range values
* [`K8s::Proxy_auth`](#K8s--Proxy_auth): a type to describe kube-proxy authentication methods
* [`K8s::Proxy_method`](#K8s--Proxy_method): a type to describe how kube-proxy should be deployed
* [`K8s::Quantity`](#K8s--Quantity): This regexp matches quantities, like those for resource requests/limits
* [`K8s::TLS_altnames`](#K8s--TLS_altnames): a type to describe TLS alternative names in certificates
* [`K8s::Timestamp`](#K8s--Timestamp): This regexp matches RFC3339 timestamps, the same as what Kubernetes expects to find
* [`K8s::URI`](#K8s--URI): This regexp matches URI values
* [`K8s::Version`](#K8s--Version): A type for handling Kubernetes version numbers

## Classes

### <a name="k8s"></a>`k8s`

Sets up a Kubernetes instance - either as a node or as a server

#### Parameters

The following parameters are available in the `k8s` class:

* [`api_service_address`](#-k8s--api_service_address)
* [`cluster_cidr`](#-k8s--cluster_cidr)
* [`cluster_domain`](#-k8s--cluster_domain)
* [`container_image_tag`](#-k8s--container_image_tag)
* [`container_manager`](#-k8s--container_manager)
* [`container_registry`](#-k8s--container_registry)
* [`container_runtime_service`](#-k8s--container_runtime_service)
* [`containerd_package`](#-k8s--containerd_package)
* [`control_plane_url`](#-k8s--control_plane_url)
* [`crictl_package`](#-k8s--crictl_package)
* [`crio_package`](#-k8s--crio_package)
* [`dns_service_address`](#-k8s--dns_service_address)
* [`ensure`](#-k8s--ensure)
* [`etcd_cluster_name`](#-k8s--etcd_cluster_name)
* [`etcd_version`](#-k8s--etcd_version)
* [`firewall_type`](#-k8s--firewall_type)
* [`gid`](#-k8s--gid)
* [`group`](#-k8s--group)
* [`hyperkube_name`](#-k8s--hyperkube_name)
* [`incluster_control_plane_url`](#-k8s--incluster_control_plane_url)
* [`manage_container_manager`](#-k8s--manage_container_manager)
* [`manage_etcd`](#-k8s--manage_etcd)
* [`manage_firewall`](#-k8s--manage_firewall)
* [`manage_image`](#-k8s--manage_image)
* [`manage_kernel_modules`](#-k8s--manage_kernel_modules)
* [`manage_kube_proxy`](#-k8s--manage_kube_proxy)
* [`manage_packages`](#-k8s--manage_packages)
* [`manage_repo`](#-k8s--manage_repo)
* [`manage_sysctl_settings`](#-k8s--manage_sysctl_settings)
* [`native_packaging`](#-k8s--native_packaging)
* [`native_url_template`](#-k8s--native_url_template)
* [`node_auth`](#-k8s--node_auth)
* [`package_template`](#-k8s--package_template)
* [`packaging`](#-k8s--packaging)
* [`puppetdb_discovery`](#-k8s--puppetdb_discovery)
* [`puppetdb_discovery_tag`](#-k8s--puppetdb_discovery_tag)
* [`purge_manifests`](#-k8s--purge_manifests)
* [`role`](#-k8s--role)
* [`runc_version`](#-k8s--runc_version)
* [`service_cluster_cidr`](#-k8s--service_cluster_cidr)
* [`sysconfig_path`](#-k8s--sysconfig_path)
* [`tarball_url_template`](#-k8s--tarball_url_template)
* [`uid`](#-k8s--uid)
* [`user`](#-k8s--user)
* [`version`](#-k8s--version)

##### <a name="-k8s--api_service_address"></a>`api_service_address`

Data type: `Stdlib::IP::Address::Nosubnet`

IP address for the API service

Default value: `k8s::ip_in_cidr($service_cluster_cidr, 'first')`

##### <a name="-k8s--cluster_cidr"></a>`cluster_cidr`

Data type: `K8s::CIDR`

CIDR for the pod network

Default value: `'10.0.0.0/16'`

##### <a name="-k8s--cluster_domain"></a>`cluster_domain`

Data type: `Stdlib::Fqdn`

domain name for the cluster

Default value: `'cluster.local'`

##### <a name="-k8s--container_image_tag"></a>`container_image_tag`

Data type: `Optional[String[1]]`

container image tag to use

Default value: `undef`

##### <a name="-k8s--container_manager"></a>`container_manager`

Data type: `K8s::Container_runtimes`

container manager to use

Default value: `'crio'`

##### <a name="-k8s--container_registry"></a>`container_registry`

Data type: `String[1]`

container registry to use

Default value: `'registry.k8s.io'`

##### <a name="-k8s--container_runtime_service"></a>`container_runtime_service`

Data type: `String[1]`

name of the container runtime service

Default value: `"${container_manager}.service"`

##### <a name="-k8s--containerd_package"></a>`containerd_package`

Data type: `Optional[String[1]]`

name of the containerd package

Default value: `undef`

##### <a name="-k8s--control_plane_url"></a>`control_plane_url`

Data type: `Stdlib::HTTPUrl`

URL for the control plane

Default value: `'https://kubernetes:6443'`

##### <a name="-k8s--crictl_package"></a>`crictl_package`

Data type: `Optional[String[1]]`

name of the crictl package

Default value: `undef`

##### <a name="-k8s--crio_package"></a>`crio_package`

Data type: `Optional[String[1]]`

name of the crio package

Default value: `undef`

##### <a name="-k8s--dns_service_address"></a>`dns_service_address`

Data type: `K8s::IP_addresses`

IP address for the DNS service

Default value: `k8s::ip_in_cidr($service_cluster_cidr, 'second')`

##### <a name="-k8s--ensure"></a>`ensure`

Data type: `K8s::Ensure`

whether kubernetes should be present or absent

Default value: `'present'`

##### <a name="-k8s--etcd_cluster_name"></a>`etcd_cluster_name`

Data type: `String[1]`

name of the etcd cluster for searching its nodes in the puppetdb

Default value: `'default'`

##### <a name="-k8s--etcd_version"></a>`etcd_version`

Data type: `String[1]`

version of etcd to install

Default value: `'3.5.16'`

##### <a name="-k8s--firewall_type"></a>`firewall_type`

Data type: `Optional[K8s::Firewall]`

type of firewall to use

Default value: `undef`

##### <a name="-k8s--gid"></a>`gid`

Data type: `Integer[0, 65535]`

group id for kubernetes files and services

Default value: `888`

##### <a name="-k8s--group"></a>`group`

Data type: `String[1]`

groupname for kubernetes files and services

Default value: `'kube'`

##### <a name="-k8s--hyperkube_name"></a>`hyperkube_name`

Data type: `String[1]`

name of the hyperkube binary

Default value: `'hyperkube'`

##### <a name="-k8s--incluster_control_plane_url"></a>`incluster_control_plane_url`

Data type: `Stdlib::HTTPUrl`

URL for the control plane from within the cluster

Default value: `'https://kubernetes.default.svc'`

##### <a name="-k8s--manage_container_manager"></a>`manage_container_manager`

Data type: `Boolean`

whether to manage the container manager

Default value: `true`

##### <a name="-k8s--manage_etcd"></a>`manage_etcd`

Data type: `Boolean`

whether to manage etcd

Default value: `true`

##### <a name="-k8s--manage_firewall"></a>`manage_firewall`

Data type: `Boolean`

whether to manage the firewall

Default value: `false`

##### <a name="-k8s--manage_image"></a>`manage_image`

Data type: `Boolean`

whether to manage the image

Default value: `false`

##### <a name="-k8s--manage_kernel_modules"></a>`manage_kernel_modules`

Data type: `Boolean`

A flag to manage required Kernel modules.

Default value: `true`

##### <a name="-k8s--manage_kube_proxy"></a>`manage_kube_proxy`

Data type: `K8s::Proxy_method`

How/if the kube-proxy component should be managed, either as an in-cluster component (default), or as an on-node component for advanced use-cases.

Default value: `true`

##### <a name="-k8s--manage_packages"></a>`manage_packages`

Data type: `Boolean`

whether to manage packages

Default value: `true`

##### <a name="-k8s--manage_repo"></a>`manage_repo`

Data type: `Boolean`

whether to manage the repo

Default value: `true`

##### <a name="-k8s--manage_sysctl_settings"></a>`manage_sysctl_settings`

Data type: `Boolean`

A flag to manage required sysctl settings.

Default value: `true`

##### <a name="-k8s--native_packaging"></a>`native_packaging`

Data type: `K8s::Native_packaging`

type of native packaging to use

Default value: `'loose'`

##### <a name="-k8s--native_url_template"></a>`native_url_template`

Data type: `String[1]`

template for native packaging

Default value: `'https://dl.k8s.io/release/v%{version}/bin/%{kernel}/%{arch}/%{binary}'`

##### <a name="-k8s--node_auth"></a>`node_auth`

Data type: `K8s::Node_auth`

authentication method for nodes

Default value: `'bootstrap'`

##### <a name="-k8s--package_template"></a>`package_template`

Data type: `String[1]`

template for package names

Default value: `'kubernetes-%{component}'`

##### <a name="-k8s--packaging"></a>`packaging`

Data type: `Enum['container', 'native']`

whether to use native or container packaging

Default value: `'native'`

##### <a name="-k8s--puppetdb_discovery"></a>`puppetdb_discovery`

Data type: `Boolean`

whether to use puppetdb for node discovery

Default value: `false`

##### <a name="-k8s--puppetdb_discovery_tag"></a>`puppetdb_discovery_tag`

Data type: `String[1]`

tag to use for puppetdb node discovery

Default value: `'default'`

##### <a name="-k8s--purge_manifests"></a>`purge_manifests`

Data type: `Boolean`

whether to purge manifests

Default value: `true`

##### <a name="-k8s--role"></a>`role`

Data type: `Enum['node','server','none']`

role of the node

Default value: `'none'`

##### <a name="-k8s--runc_version"></a>`runc_version`

Data type: `String[1]`

version of runc to install

Default value: `'installed'`

##### <a name="-k8s--service_cluster_cidr"></a>`service_cluster_cidr`

Data type: `K8s::CIDR`

CIDR for the service network

Default value: `'10.1.0.0/24'`

##### <a name="-k8s--sysconfig_path"></a>`sysconfig_path`

Data type: `Optional[Stdlib::Unixpath]`

path to the sysconfig directory

Default value: `undef`

##### <a name="-k8s--tarball_url_template"></a>`tarball_url_template`

Data type: `String[1]`

template for tarball packaging

Default value: `'https://dl.k8s.io/release/v%{version}/kubernetes-%{component}-%{kernel}-%{arch}.tar.gz'`

##### <a name="-k8s--uid"></a>`uid`

Data type: `Integer[0, 65535]`

user id for kubernetes files and services

Default value: `888`

##### <a name="-k8s--user"></a>`user`

Data type: `String[1]`

username for kubernetes files and services

Default value: `'kube'`

##### <a name="-k8s--version"></a>`version`

Data type: `String[1]`

version of kubernetes to install

Default value: `'1.28.14'`

### <a name="k8s--install--cni_plugins"></a>`k8s::install::cni_plugins`

Class: k8s::install::cni_plugins

#### Parameters

The following parameters are available in the `k8s::install::cni_plugins` class:

* [`ensure`](#-k8s--install--cni_plugins--ensure)
* [`method`](#-k8s--install--cni_plugins--method)
* [`version`](#-k8s--install--cni_plugins--version)
* [`download_url_template`](#-k8s--install--cni_plugins--download_url_template)

##### <a name="-k8s--install--cni_plugins--ensure"></a>`ensure`

Data type: `K8s::Ensure`

set ensure for installation or deinstallation

Default value: `$k8s::ensure`

##### <a name="-k8s--install--cni_plugins--method"></a>`method`

Data type: `String[1]`

installation method

Default value: `$k8s::native_packaging`

##### <a name="-k8s--install--cni_plugins--version"></a>`version`

Data type: `String[1]`

sets the version to use

Default value: `'v1.2.0'`

##### <a name="-k8s--install--cni_plugins--download_url_template"></a>`download_url_template`

Data type: `String[1]`

template string for the cni_plugins download url

Default value: `'https://github.com/containernetworking/plugins/releases/download/%{version}/cni-plugins-linux-%{arch}-%{version}.tgz'`

### <a name="k8s--install--container_runtime"></a>`k8s::install::container_runtime`

Class: k8s::install::container_runtime

#### Parameters

The following parameters are available in the `k8s::install::container_runtime` class:

* [`container_manager`](#-k8s--install--container_runtime--container_manager)
* [`containerd_package`](#-k8s--install--container_runtime--containerd_package)
* [`crio_package`](#-k8s--install--container_runtime--crio_package)
* [`k8s_version`](#-k8s--install--container_runtime--k8s_version)
* [`manage_repo`](#-k8s--install--container_runtime--manage_repo)
* [`package_ensure`](#-k8s--install--container_runtime--package_ensure)
* [`runc_version`](#-k8s--install--container_runtime--runc_version)

##### <a name="-k8s--install--container_runtime--container_manager"></a>`container_manager`

Data type: `K8s::Container_runtimes`

set the cri to use

Default value: `$k8s::container_manager`

##### <a name="-k8s--install--container_runtime--containerd_package"></a>`containerd_package`

Data type: `Optional[String[1]]`

the containerd package anme

Default value: `$k8s::containerd_package`

##### <a name="-k8s--install--container_runtime--crio_package"></a>`crio_package`

Data type: `Optional[String[1]]`

cri-o the package name

Default value: `$k8s::crio_package`

##### <a name="-k8s--install--container_runtime--k8s_version"></a>`k8s_version`

Data type: `String[1]`

the k8s version

Default value: `$k8s::version`

##### <a name="-k8s--install--container_runtime--manage_repo"></a>`manage_repo`

Data type: `Boolean`

whether to manage the repo or not

Default value: `$k8s::manage_repo`

##### <a name="-k8s--install--container_runtime--package_ensure"></a>`package_ensure`

Data type: `String[1]`

the ensure value to set on the cri package

Default value: `installed`

##### <a name="-k8s--install--container_runtime--runc_version"></a>`runc_version`

Data type: `String[1]`

the runc version

Default value: `$k8s::runc_version`

### <a name="k8s--install--crictl"></a>`k8s::install::crictl`

Class: k8s::install::crictl

#### Parameters

The following parameters are available in the `k8s::install::crictl` class:

* [`ensure`](#-k8s--install--crictl--ensure)
* [`version`](#-k8s--install--crictl--version)
* [`config`](#-k8s--install--crictl--config)
* [`crictl_package`](#-k8s--install--crictl--crictl_package)
* [`manage_repo`](#-k8s--install--crictl--manage_repo)
* [`download_url_template`](#-k8s--install--crictl--download_url_template)

##### <a name="-k8s--install--crictl--ensure"></a>`ensure`

Data type: `K8s::Ensure`

set ensure for installation or deinstallation

Default value: `$k8s::ensure`

##### <a name="-k8s--install--crictl--version"></a>`version`

Data type: `String[1]`

the k8s version

Default value: `'v1.26.0'`

##### <a name="-k8s--install--crictl--config"></a>`config`

Data type: `Hash`

config for crictl, for example:
k8s::install::crictl::config:
  'runtime-endpoint': 'unix:///run/containerd/containerd.sock'
  'image-endpoint': 'unix:///run/containerd/containerd.sock'

Default value: `{}`

##### <a name="-k8s--install--crictl--crictl_package"></a>`crictl_package`

Data type: `Optional[String[1]]`

the package name of crictl

Default value: `$k8s::crictl_package`

##### <a name="-k8s--install--crictl--manage_repo"></a>`manage_repo`

Data type: `Boolean`

whether to manage the repo or not

Default value: `$k8s::manage_repo`

##### <a name="-k8s--install--crictl--download_url_template"></a>`download_url_template`

Data type: `Stdlib::HTTPUrl`

template string for the URL to download tar.gz from

Default value: `'https://github.com/kubernetes-sigs/cri-tools/releases/download/%{version}/crictl-%{version}-linux-%{arch}.tar.gz'`

### <a name="k8s--install--kubeadm"></a>`k8s::install::kubeadm`

Installs the kubeadm binary

#### Parameters

The following parameters are available in the `k8s::install::kubeadm` class:

* [`ensure`](#-k8s--install--kubeadm--ensure)

##### <a name="-k8s--install--kubeadm--ensure"></a>`ensure`

Data type: `K8s::Ensure`

set ensure for installation or deinstallation

Default value: `$k8s::ensure`

### <a name="k8s--install--kubectl"></a>`k8s::install::kubectl`

Installs the kubectl binary

#### Parameters

The following parameters are available in the `k8s::install::kubectl` class:

* [`ensure`](#-k8s--install--kubectl--ensure)

##### <a name="-k8s--install--kubectl--ensure"></a>`ensure`

Data type: `K8s::Ensure`

set ensure for installation or deinstallation

Default value: `$k8s::ensure`

### <a name="k8s--node"></a>`k8s::node`

Installs a Kubernetes node

#### Parameters

The following parameters are available in the `k8s::node` class:

* [`ca_cert`](#-k8s--node--ca_cert)
* [`cert_path`](#-k8s--node--cert_path)
* [`control_plane_url`](#-k8s--node--control_plane_url)
* [`ensure`](#-k8s--node--ensure)
* [`firewall_type`](#-k8s--node--firewall_type)
* [`manage_crictl`](#-k8s--node--manage_crictl)
* [`manage_firewall`](#-k8s--node--manage_firewall)
* [`manage_kernel_modules`](#-k8s--node--manage_kernel_modules)
* [`manage_kubelet`](#-k8s--node--manage_kubelet)
* [`manage_proxy`](#-k8s--node--manage_proxy)
* [`manage_simple_cni`](#-k8s--node--manage_simple_cni)
* [`manage_sysctl_settings`](#-k8s--node--manage_sysctl_settings)
* [`node_auth`](#-k8s--node--node_auth)
* [`node_cert`](#-k8s--node--node_cert)
* [`node_key`](#-k8s--node--node_key)
* [`node_token`](#-k8s--node--node_token)
* [`proxy_auth`](#-k8s--node--proxy_auth)
* [`proxy_cert`](#-k8s--node--proxy_cert)
* [`proxy_key`](#-k8s--node--proxy_key)
* [`proxy_token`](#-k8s--node--proxy_token)
* [`puppetdb_discovery_tag`](#-k8s--node--puppetdb_discovery_tag)

##### <a name="-k8s--node--ca_cert"></a>`ca_cert`

Data type: `Stdlib::Unixpath`

path to the ca cert

Default value: `"${cert_path}/ca.pem"`

##### <a name="-k8s--node--cert_path"></a>`cert_path`

Data type: `Stdlib::Unixpath`

path to cert files

Default value: `'/var/lib/kubelet/pki'`

##### <a name="-k8s--node--control_plane_url"></a>`control_plane_url`

Data type: `Stdlib::HTTPUrl`

cluster API connection

Default value: `$k8s::control_plane_url`

##### <a name="-k8s--node--ensure"></a>`ensure`

Data type: `K8s::Ensure`

set ensure for installation or deinstallation

Default value: `$k8s::ensure`

##### <a name="-k8s--node--firewall_type"></a>`firewall_type`

Data type: `Optional[K8s::Firewall]`

define the type of firewall to use

Default value: `$k8s::firewall_type`

##### <a name="-k8s--node--manage_crictl"></a>`manage_crictl`

Data type: `Boolean`

toggle to install crictl

Default value: `false`

##### <a name="-k8s--node--manage_firewall"></a>`manage_firewall`

Data type: `Boolean`

whether to manage firewall or not

Default value: `$k8s::manage_firewall`

##### <a name="-k8s--node--manage_kernel_modules"></a>`manage_kernel_modules`

Data type: `Boolean`

whether to load kernel modules or not

Default value: `$k8s::manage_kernel_modules`

##### <a name="-k8s--node--manage_kubelet"></a>`manage_kubelet`

Data type: `Boolean`

whether to manage kublet or not

Default value: `true`

##### <a name="-k8s--node--manage_proxy"></a>`manage_proxy`

Data type: `Boolean`

whether to manage kube-proxy or not

Default value: `$k8s::manage_kube_proxy == 'on-node'`

##### <a name="-k8s--node--manage_simple_cni"></a>`manage_simple_cni`

Data type: `Boolean`

toggle to use a simple bridge network for containers

Default value: `false`

##### <a name="-k8s--node--manage_sysctl_settings"></a>`manage_sysctl_settings`

Data type: `Boolean`

whether to manage sysctl settings or not

Default value: `$k8s::manage_sysctl_settings`

##### <a name="-k8s--node--node_auth"></a>`node_auth`

Data type: `K8s::Node_auth`

type of node authentication

Default value: `$k8s::node_auth`

##### <a name="-k8s--node--node_cert"></a>`node_cert`

Data type: `Optional[Stdlib::Unixpath]`

path to node cert file

Default value: `undef`

##### <a name="-k8s--node--node_key"></a>`node_key`

Data type: `Optional[Stdlib::Unixpath]`

path to node key file

Default value: `undef`

##### <a name="-k8s--node--node_token"></a>`node_token`

Data type: `Optional[Sensitive[String]]`

k8s token to join a cluster

Default value: `undef`

##### <a name="-k8s--node--proxy_auth"></a>`proxy_auth`

Data type: `K8s::Proxy_auth`

which proxy auth to use

Default value: `'incluster'`

##### <a name="-k8s--node--proxy_cert"></a>`proxy_cert`

Data type: `Optional[Stdlib::Unixpath]`

path to proxy cert file

Default value: `undef`

##### <a name="-k8s--node--proxy_key"></a>`proxy_key`

Data type: `Optional[Stdlib::Unixpath]`

path to proxy key file

Default value: `undef`

##### <a name="-k8s--node--proxy_token"></a>`proxy_token`

Data type: `Optional[Sensitive[String]]`

k8s token for kube-proxy

Default value: `undef`

##### <a name="-k8s--node--puppetdb_discovery_tag"></a>`puppetdb_discovery_tag`

Data type: `String[1]`

enable puppetdb resource searching

Default value: `$k8s::puppetdb_discovery_tag`

### <a name="k8s--node--kube_proxy"></a>`k8s::node::kube_proxy`

For most use-cases, running kube-proxy inside the cluster itself is recommended

#### Parameters

The following parameters are available in the `k8s::node::kube_proxy` class:

* [`arguments`](#-k8s--node--kube_proxy--arguments)
* [`auth`](#-k8s--node--kube_proxy--auth)
* [`ca_cert`](#-k8s--node--kube_proxy--ca_cert)
* [`cert`](#-k8s--node--kube_proxy--cert)
* [`cluster_cidr`](#-k8s--node--kube_proxy--cluster_cidr)
* [`config`](#-k8s--node--kube_proxy--config)
* [`control_plane_url`](#-k8s--node--kube_proxy--control_plane_url)
* [`ensure`](#-k8s--node--kube_proxy--ensure)
* [`key`](#-k8s--node--kube_proxy--key)
* [`puppetdb_discovery_tag`](#-k8s--node--kube_proxy--puppetdb_discovery_tag)
* [`token`](#-k8s--node--kube_proxy--token)

##### <a name="-k8s--node--kube_proxy--arguments"></a>`arguments`

Data type: `Hash[String, Data]`

A hash of additional arguments to pass to kube-proxy

Default value: `{}`

##### <a name="-k8s--node--kube_proxy--auth"></a>`auth`

Data type: `K8s::Proxy_auth`

The authentication method to use for the API server

Default value: `$k8s::node::proxy_auth`

##### <a name="-k8s--node--kube_proxy--ca_cert"></a>`ca_cert`

Data type: `Optional[Stdlib::Unixpath]`

The path to the CA certificate to use for the API server

Default value: `$k8s::node::ca_cert`

##### <a name="-k8s--node--kube_proxy--cert"></a>`cert`

Data type: `Optional[Stdlib::Unixpath]`

The path to the client certificate to use for the API server

Default value: `$k8s::node::proxy_cert`

##### <a name="-k8s--node--kube_proxy--cluster_cidr"></a>`cluster_cidr`

Data type: `K8s::CIDR`

The CIDR range of the cluster

Default value: `$k8s::cluster_cidr`

##### <a name="-k8s--node--kube_proxy--config"></a>`config`

Data type: `Hash[String, Data]`

A hash of additional configuration options to pass to kube-proxy

Default value: `{}`

##### <a name="-k8s--node--kube_proxy--control_plane_url"></a>`control_plane_url`

Data type: `Stdlib::HTTPUrl`

The URL of the Kubernetes API server

Default value: `$k8s::node::control_plane_url`

##### <a name="-k8s--node--kube_proxy--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether the kube-proxy service should be configured

Default value: `$k8s::node::ensure`

##### <a name="-k8s--node--kube_proxy--key"></a>`key`

Data type: `Optional[Stdlib::Unixpath]`

The path to the client key to use for the API server

Default value: `$k8s::node::proxy_key`

##### <a name="-k8s--node--kube_proxy--puppetdb_discovery_tag"></a>`puppetdb_discovery_tag`

Data type: `String`

The tag to use for PuppetDB service discovery

Default value: `$k8s::node::puppetdb_discovery_tag`

##### <a name="-k8s--node--kube_proxy--token"></a>`token`

Data type: `Optional[Sensitive[String]]`

The token to use for the API server

Default value: `$k8s::node::proxy_token`

### <a name="k8s--node--kubectl"></a>`k8s::node::kubectl`

Installs the kubectl binary

#### Parameters

The following parameters are available in the `k8s::node::kubectl` class:

* [`ensure`](#-k8s--node--kubectl--ensure)

##### <a name="-k8s--node--kubectl--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether to install the binary

Default value: `$k8s::ensure`

### <a name="k8s--node--kubelet"></a>`k8s::node::kubelet`

Installs and configures kubelet

#### Parameters

The following parameters are available in the `k8s::node::kubelet` class:

* [`arguments`](#-k8s--node--kubelet--arguments)
* [`auth`](#-k8s--node--kubelet--auth)
* [`ca_cert`](#-k8s--node--kubelet--ca_cert)
* [`cert`](#-k8s--node--kubelet--cert)
* [`cert_path`](#-k8s--node--kubelet--cert_path)
* [`config`](#-k8s--node--kubelet--config)
* [`control_plane_url`](#-k8s--node--kubelet--control_plane_url)
* [`ensure`](#-k8s--node--kubelet--ensure)
* [`firewall_type`](#-k8s--node--kubelet--firewall_type)
* [`key`](#-k8s--node--kubelet--key)
* [`kubeconfig`](#-k8s--node--kubelet--kubeconfig)
* [`manage_firewall`](#-k8s--node--kubelet--manage_firewall)
* [`manage_kernel_modules`](#-k8s--node--kubelet--manage_kernel_modules)
* [`manage_sysctl_settings`](#-k8s--node--kubelet--manage_sysctl_settings)
* [`puppetdb_discovery_tag`](#-k8s--node--kubelet--puppetdb_discovery_tag)
* [`rotate_server_tls`](#-k8s--node--kubelet--rotate_server_tls)
* [`runtime`](#-k8s--node--kubelet--runtime)
* [`runtime_service`](#-k8s--node--kubelet--runtime_service)
* [`support_dualstack`](#-k8s--node--kubelet--support_dualstack)
* [`token`](#-k8s--node--kubelet--token)

##### <a name="-k8s--node--kubelet--arguments"></a>`arguments`

Data type: `Hash[String, Data]`

additional arguments to pass to kubelet

Default value: `{}`

##### <a name="-k8s--node--kubelet--auth"></a>`auth`

Data type: `K8s::Node_auth`

type of node authentication

Default value: `$k8s::node::node_auth`

##### <a name="-k8s--node--kubelet--ca_cert"></a>`ca_cert`

Data type: `Optional[Stdlib::Unixpath]`

path to the ca cert

Default value: `$k8s::node::ca_cert`

##### <a name="-k8s--node--kubelet--cert"></a>`cert`

Data type: `Optional[Stdlib::Unixpath]`

path to node cert file

Default value: `$k8s::node::node_cert`

##### <a name="-k8s--node--kubelet--cert_path"></a>`cert_path`

Data type: `Stdlib::Unixpath`

path to cert files

Default value: `$k8s::node::cert_path`

##### <a name="-k8s--node--kubelet--config"></a>`config`

Data type: `Hash[String, Data]`

additional config to pass to kubelet

Default value: `{}`

##### <a name="-k8s--node--kubelet--control_plane_url"></a>`control_plane_url`

Data type: `Stdlib::HTTPUrl`

cluster API connection

Default value: `$k8s::node::control_plane_url`

##### <a name="-k8s--node--kubelet--ensure"></a>`ensure`

Data type: `K8s::Ensure`

set ensure for installation or deinstallation

Default value: `$k8s::node::ensure`

##### <a name="-k8s--node--kubelet--firewall_type"></a>`firewall_type`

Data type: `Optional[K8s::Firewall]`

define the type of firewall to use

Default value: `$k8s::node::firewall_type`

##### <a name="-k8s--node--kubelet--key"></a>`key`

Data type: `Optional[Stdlib::Unixpath]`

path to node key file

Default value: `$k8s::node::node_key`

##### <a name="-k8s--node--kubelet--kubeconfig"></a>`kubeconfig`

Data type: `Stdlib::Unixpath`

path to kubeconfig

Default value: `'/srv/kubernetes/kubelet.kubeconf'`

##### <a name="-k8s--node--kubelet--manage_firewall"></a>`manage_firewall`

Data type: `Boolean`

whether to manage firewall or not

Default value: `$k8s::node::manage_firewall`

##### <a name="-k8s--node--kubelet--manage_kernel_modules"></a>`manage_kernel_modules`

Data type: `Boolean`

whether to load kernel modules or not

Default value: `$k8s::node::manage_kernel_modules`

##### <a name="-k8s--node--kubelet--manage_sysctl_settings"></a>`manage_sysctl_settings`

Data type: `Boolean`

whether to manage sysctl settings or not

Default value: `$k8s::node::manage_sysctl_settings`

##### <a name="-k8s--node--kubelet--puppetdb_discovery_tag"></a>`puppetdb_discovery_tag`

Data type: `String[1]`

enable puppetdb resource searching

Default value: `$k8s::node::puppetdb_discovery_tag`

##### <a name="-k8s--node--kubelet--rotate_server_tls"></a>`rotate_server_tls`

Data type: `Boolean`

whether to rotate server tls or not

Default value: `$auth == 'bootstrap'`

##### <a name="-k8s--node--kubelet--runtime"></a>`runtime`

Data type: `String`

which container runtime to use

Default value: `$k8s::container_manager`

##### <a name="-k8s--node--kubelet--runtime_service"></a>`runtime_service`

Data type: `String`

name of the service of the container runtime

Default value: `$k8s::container_runtime_service`

##### <a name="-k8s--node--kubelet--support_dualstack"></a>`support_dualstack`

Data type: `Boolean`

whether to support dualstack or not

Default value: `$k8s::cluster_cidr =~ Array[Data, 2]`

##### <a name="-k8s--node--kubelet--token"></a>`token`

Data type: `Optional[Sensitive[String]]`

k8s token to join a cluster

Default value: `$k8s::node::node_token`

### <a name="k8s--node--simple_cni"></a>`k8s::node::simple_cni`

Class: k8s::node::simple_cni

#### Parameters

The following parameters are available in the `k8s::node::simple_cni` class:

* [`pod_cidr`](#-k8s--node--simple_cni--pod_cidr)

##### <a name="-k8s--node--simple_cni--pod_cidr"></a>`pod_cidr`

Data type: `K8s::CIDR`

cidr for pods in the network

Default value: `$k8s::cluster_cidr`

### <a name="k8s--repo"></a>`k8s::repo`

Handles repositories for the container runtime

#### Parameters

The following parameters are available in the `k8s::repo` class:

* [`container_manager`](#-k8s--repo--container_manager)
* [`crio_version`](#-k8s--repo--crio_version)
* [`manage_container_manager`](#-k8s--repo--manage_container_manager)

##### <a name="-k8s--repo--container_manager"></a>`container_manager`

Data type: `K8s::Container_runtimes`

The name of the container manager

Default value: `$k8s::container_manager`

##### <a name="-k8s--repo--crio_version"></a>`crio_version`

Data type: `String[1]`

version o cri-o

Default value: `$k8s::version.split('\.')[0, 2].join('.')`

##### <a name="-k8s--repo--manage_container_manager"></a>`manage_container_manager`

Data type: `Boolean`

whether to add cri-o repository or not

Default value: `$k8s::manage_container_manager`

### <a name="k8s--server"></a>`k8s::server`

Sets up a Kubernetes server instance

#### Parameters

The following parameters are available in the `k8s::server` class:

* [`aggregator_ca_cert`](#-k8s--server--aggregator_ca_cert)
* [`aggregator_ca_key`](#-k8s--server--aggregator_ca_key)
* [`api_port`](#-k8s--server--api_port)
* [`ca_cert`](#-k8s--server--ca_cert)
* [`ca_key`](#-k8s--server--ca_key)
* [`cert_path`](#-k8s--server--cert_path)
* [`cluster_cidr`](#-k8s--server--cluster_cidr)
* [`cluster_domain`](#-k8s--server--cluster_domain)
* [`control_plane_url`](#-k8s--server--control_plane_url)
* [`direct_control_plane_url`](#-k8s--server--direct_control_plane_url)
* [`dns_service_address`](#-k8s--server--dns_service_address)
* [`ensure`](#-k8s--server--ensure)
* [`etcd_cluster_name`](#-k8s--server--etcd_cluster_name)
* [`etcd_servers`](#-k8s--server--etcd_servers)
* [`firewall_type`](#-k8s--server--firewall_type)
* [`generate_ca`](#-k8s--server--generate_ca)
* [`manage_certs`](#-k8s--server--manage_certs)
* [`manage_components`](#-k8s--server--manage_components)
* [`manage_crictl`](#-k8s--server--manage_crictl)
* [`manage_etcd`](#-k8s--server--manage_etcd)
* [`manage_firewall`](#-k8s--server--manage_firewall)
* [`manage_kubeadm`](#-k8s--server--manage_kubeadm)
* [`manage_resources`](#-k8s--server--manage_resources)
* [`manage_signing`](#-k8s--server--manage_signing)
* [`node_on_server`](#-k8s--server--node_on_server)
* [`puppetdb_discovery_tag`](#-k8s--server--puppetdb_discovery_tag)

##### <a name="-k8s--server--aggregator_ca_cert"></a>`aggregator_ca_cert`

Data type: `Stdlib::Unixpath`

path to the aggregator ca cert

Default value: `"${cert_path}/aggregator-ca.pem"`

##### <a name="-k8s--server--aggregator_ca_key"></a>`aggregator_ca_key`

Data type: `Stdlib::Unixpath`

path to the aggregator ca key

Default value: `"${cert_path}/aggregator-ca.key"`

##### <a name="-k8s--server--api_port"></a>`api_port`

Data type: `Integer[1]`

Cluster API port

Default value: `6443`

##### <a name="-k8s--server--ca_cert"></a>`ca_cert`

Data type: `Stdlib::Unixpath`

path to the ca cert

Default value: `"${cert_path}/ca.pem"`

##### <a name="-k8s--server--ca_key"></a>`ca_key`

Data type: `Stdlib::Unixpath`

path to the ca key

Default value: `"${cert_path}/ca.key"`

##### <a name="-k8s--server--cert_path"></a>`cert_path`

Data type: `Stdlib::Unixpath`

path to cert files

Default value: `'/etc/kubernetes/certs'`

##### <a name="-k8s--server--cluster_cidr"></a>`cluster_cidr`

Data type: `K8s::CIDR`

cluster cidr

Default value: `$k8s::cluster_cidr`

##### <a name="-k8s--server--cluster_domain"></a>`cluster_domain`

Data type: `String`

cluster domain name

Default value: `$k8s::cluster_domain`

##### <a name="-k8s--server--control_plane_url"></a>`control_plane_url`

Data type: `String`

cluster API connection

Default value: `$k8s::control_plane_url`

##### <a name="-k8s--server--direct_control_plane_url"></a>`direct_control_plane_url`

Data type: `String`

direct clust API connection

Default value: `"https://${fact('networking.ip')}:${api_port}"`

##### <a name="-k8s--server--dns_service_address"></a>`dns_service_address`

Data type: `K8s::IP_addresses`

cluster dns service address

Default value: `$k8s::dns_service_address`

##### <a name="-k8s--server--ensure"></a>`ensure`

Data type: `K8s::Ensure`

set ensure for installation or deinstallation

Default value: `$k8s::ensure`

##### <a name="-k8s--server--etcd_cluster_name"></a>`etcd_cluster_name`

Data type: `String[1]`

name of the etcd cluster for searching its nodes in the puppetdb

Default value: `$k8s::etcd_cluster_name`

##### <a name="-k8s--server--etcd_servers"></a>`etcd_servers`

Data type: `Optional[Array[Stdlib::HTTPUrl]]`

list etcd servers if no puppetdb is used

Default value: `undef`

##### <a name="-k8s--server--firewall_type"></a>`firewall_type`

Data type: `Optional[K8s::Firewall]`

define the type of firewall to use

Default value: `$k8s::firewall_type`

##### <a name="-k8s--server--generate_ca"></a>`generate_ca`

Data type: `Boolean`

initially generate ca

Default value: `false`

##### <a name="-k8s--server--manage_certs"></a>`manage_certs`

Data type: `Boolean`

whether to manage certs or not

Default value: `true`

##### <a name="-k8s--server--manage_components"></a>`manage_components`

Data type: `Boolean`

whether to manage components or not

Default value: `true`

##### <a name="-k8s--server--manage_crictl"></a>`manage_crictl`

Data type: `Boolean`

whether to install crictl or not

Default value: `false`

##### <a name="-k8s--server--manage_etcd"></a>`manage_etcd`

Data type: `Boolean`

whether to manage etcd or not

Default value: `$k8s::manage_etcd`

##### <a name="-k8s--server--manage_firewall"></a>`manage_firewall`

Data type: `Boolean`

whether to manage firewall or not

Default value: `$k8s::manage_firewall`

##### <a name="-k8s--server--manage_kubeadm"></a>`manage_kubeadm`

Data type: `Boolean`

whether to install kubeadm or not

Default value: `false`

##### <a name="-k8s--server--manage_resources"></a>`manage_resources`

Data type: `Boolean`

whether to manage cluster internal resources or not

Default value: `true`

##### <a name="-k8s--server--manage_signing"></a>`manage_signing`

Data type: `Boolean`

whether to manage cert signing or not

Default value: `$k8s::puppetdb_discovery`

##### <a name="-k8s--server--node_on_server"></a>`node_on_server`

Data type: `Boolean`

whether to use controller also as nodes or not

Default value: `true`

##### <a name="-k8s--server--puppetdb_discovery_tag"></a>`puppetdb_discovery_tag`

Data type: `String[1]`

enable puppetdb resource searching

Default value: `$k8s::puppetdb_discovery_tag`

### <a name="k8s--server--apiserver"></a>`k8s::server::apiserver`

Installs and configures a Kubernetes apiserver

#### Parameters

The following parameters are available in the `k8s::server::apiserver` class:

* [`advertise_address`](#-k8s--server--apiserver--advertise_address)
* [`aggregator_ca_cert`](#-k8s--server--apiserver--aggregator_ca_cert)
* [`apiserver_cert`](#-k8s--server--apiserver--apiserver_cert)
* [`apiserver_client_cert`](#-k8s--server--apiserver--apiserver_client_cert)
* [`apiserver_client_key`](#-k8s--server--apiserver--apiserver_client_key)
* [`apiserver_key`](#-k8s--server--apiserver--apiserver_key)
* [`arguments`](#-k8s--server--apiserver--arguments)
* [`ca_cert`](#-k8s--server--apiserver--ca_cert)
* [`cert_path`](#-k8s--server--apiserver--cert_path)
* [`container_image`](#-k8s--server--apiserver--container_image)
* [`container_image_tag`](#-k8s--server--apiserver--container_image_tag)
* [`container_registry`](#-k8s--server--apiserver--container_registry)
* [`discover_etcd_servers`](#-k8s--server--apiserver--discover_etcd_servers)
* [`ensure`](#-k8s--server--apiserver--ensure)
* [`etcd_ca`](#-k8s--server--apiserver--etcd_ca)
* [`etcd_cert`](#-k8s--server--apiserver--etcd_cert)
* [`etcd_cluster_name`](#-k8s--server--apiserver--etcd_cluster_name)
* [`etcd_key`](#-k8s--server--apiserver--etcd_key)
* [`etcd_servers`](#-k8s--server--apiserver--etcd_servers)
* [`firewall_type`](#-k8s--server--apiserver--firewall_type)
* [`front_proxy_cert`](#-k8s--server--apiserver--front_proxy_cert)
* [`front_proxy_key`](#-k8s--server--apiserver--front_proxy_key)
* [`manage_firewall`](#-k8s--server--apiserver--manage_firewall)
* [`puppetdb_discovery_tag`](#-k8s--server--apiserver--puppetdb_discovery_tag)
* [`service_cluster_cidr`](#-k8s--server--apiserver--service_cluster_cidr)
* [`serviceaccount_private`](#-k8s--server--apiserver--serviceaccount_private)
* [`serviceaccount_public`](#-k8s--server--apiserver--serviceaccount_public)

##### <a name="-k8s--server--apiserver--advertise_address"></a>`advertise_address`

Data type: `Stdlib::IP::Address::Nosubnet`

bind address of the apiserver

Default value: `fact('networking.ip')`

##### <a name="-k8s--server--apiserver--aggregator_ca_cert"></a>`aggregator_ca_cert`

Data type: `Stdlib::Unixpath`

path to the aggregator ca cert file

Default value: `$k8s::server::tls::aggregator_ca_cert`

##### <a name="-k8s--server--apiserver--apiserver_cert"></a>`apiserver_cert`

Data type: `Stdlib::Unixpath`

path to the apiserver cert file

Default value: `"${cert_path}/kube-apiserver.pem"`

##### <a name="-k8s--server--apiserver--apiserver_client_cert"></a>`apiserver_client_cert`

Data type: `Stdlib::Unixpath`

path to the apiserver client cert file

Default value: `"${cert_path}/apiserver-kubelet-client.pem"`

##### <a name="-k8s--server--apiserver--apiserver_client_key"></a>`apiserver_client_key`

Data type: `Stdlib::Unixpath`

path to the apiserver client key file

Default value: `"${cert_path}/apiserver-kubelet-client.key"`

##### <a name="-k8s--server--apiserver--apiserver_key"></a>`apiserver_key`

Data type: `Stdlib::Unixpath`

path to the apiserver cert file

Default value: `"${cert_path}/kube-apiserver.key"`

##### <a name="-k8s--server--apiserver--arguments"></a>`arguments`

Data type: `Hash[String, Data]`

additional arguments for the apiserver

Default value: `{}`

##### <a name="-k8s--server--apiserver--ca_cert"></a>`ca_cert`

Data type: `Stdlib::Unixpath`

path to the ca cert

Default value: `$k8s::server::tls::ca_cert`

##### <a name="-k8s--server--apiserver--cert_path"></a>`cert_path`

Data type: `Stdlib::Unixpath`

path to cert files

Default value: `$k8s::server::tls::cert_path`

##### <a name="-k8s--server--apiserver--container_image"></a>`container_image`

Data type: `String[1]`

container image to use for the apiserver

Default value: `'kube-apiserver'`

##### <a name="-k8s--server--apiserver--container_image_tag"></a>`container_image_tag`

Data type: `Optional[String[1]]`

container image tag to use for the apiserver

Default value: `$k8s::container_image_tag`

##### <a name="-k8s--server--apiserver--container_registry"></a>`container_registry`

Data type: `String[1]`

container registry to pull the image from

Default value: `$k8s::container_registry`

##### <a name="-k8s--server--apiserver--discover_etcd_servers"></a>`discover_etcd_servers`

Data type: `Boolean`

enable puppetdb resource searching

Default value: `$k8s::puppetdb_discovery`

##### <a name="-k8s--server--apiserver--ensure"></a>`ensure`

Data type: `K8s::Ensure`

set ensure for installation or deinstallation

Default value: `$k8s::server::ensure`

##### <a name="-k8s--server--apiserver--etcd_ca"></a>`etcd_ca`

Data type: `Stdlib::Unixpath`

path to the etcd ca cert file

Default value: `"${cert_path}/etcd-ca.pem"`

##### <a name="-k8s--server--apiserver--etcd_cert"></a>`etcd_cert`

Data type: `Stdlib::Unixpath`

path to the etcd cert file

Default value: `"${cert_path}/etcd.pem"`

##### <a name="-k8s--server--apiserver--etcd_cluster_name"></a>`etcd_cluster_name`

Data type: `String[1]`

name of the etcd cluster for searching its nodes in the puppetdb

Default value: `$k8s::server::etcd_cluster_name`

##### <a name="-k8s--server--apiserver--etcd_key"></a>`etcd_key`

Data type: `Stdlib::Unixpath`

path to the etcd key file

Default value: `"${cert_path}/etcd.key"`

##### <a name="-k8s--server--apiserver--etcd_servers"></a>`etcd_servers`

Data type: `Optional[Array[Stdlib::HTTPUrl]]`

list etcd servers if no puppetdb is used

Default value: `$k8s::server::etcd_servers`

##### <a name="-k8s--server--apiserver--firewall_type"></a>`firewall_type`

Data type: `Optional[K8s::Firewall]`

define the type of firewall to use

Default value: `$k8s::server::firewall_type`

##### <a name="-k8s--server--apiserver--front_proxy_cert"></a>`front_proxy_cert`

Data type: `Stdlib::Unixpath`

path to the front proxy cert file

Default value: `"${cert_path}/front-proxy-client.pem"`

##### <a name="-k8s--server--apiserver--front_proxy_key"></a>`front_proxy_key`

Data type: `Stdlib::Unixpath`

path to the front proxy key file

Default value: `"${cert_path}/front-proxy-client.key"`

##### <a name="-k8s--server--apiserver--manage_firewall"></a>`manage_firewall`

Data type: `Boolean`

whether to manage firewall or not

Default value: `$k8s::server::manage_firewall`

##### <a name="-k8s--server--apiserver--puppetdb_discovery_tag"></a>`puppetdb_discovery_tag`

Data type: `String`

enable puppetdb resource searching

Default value: `$k8s::server::puppetdb_discovery_tag`

##### <a name="-k8s--server--apiserver--service_cluster_cidr"></a>`service_cluster_cidr`

Data type: `K8s::CIDR`

cidr of the service cluster

Default value: `$k8s::service_cluster_cidr`

##### <a name="-k8s--server--apiserver--serviceaccount_private"></a>`serviceaccount_private`

Data type: `Stdlib::Unixpath`

path to the service account private key file

Default value: `"${cert_path}/service-account.key"`

##### <a name="-k8s--server--apiserver--serviceaccount_public"></a>`serviceaccount_public`

Data type: `Stdlib::Unixpath`

path to the service account public key file

Default value: `"${cert_path}/service-account.pub"`

### <a name="k8s--server--controller_manager"></a>`k8s::server::controller_manager`

Installs and configures a Kubernetes controller manager

#### Parameters

The following parameters are available in the `k8s::server::controller_manager` class:

* [`arguments`](#-k8s--server--controller_manager--arguments)
* [`ca_cert`](#-k8s--server--controller_manager--ca_cert)
* [`ca_key`](#-k8s--server--controller_manager--ca_key)
* [`cert`](#-k8s--server--controller_manager--cert)
* [`cert_path`](#-k8s--server--controller_manager--cert_path)
* [`cluster_cidr`](#-k8s--server--controller_manager--cluster_cidr)
* [`container_image`](#-k8s--server--controller_manager--container_image)
* [`container_image_tag`](#-k8s--server--controller_manager--container_image_tag)
* [`container_registry`](#-k8s--server--controller_manager--container_registry)
* [`control_plane_url`](#-k8s--server--controller_manager--control_plane_url)
* [`ensure`](#-k8s--server--controller_manager--ensure)
* [`key`](#-k8s--server--controller_manager--key)
* [`service_cluster_cidr`](#-k8s--server--controller_manager--service_cluster_cidr)

##### <a name="-k8s--server--controller_manager--arguments"></a>`arguments`

Data type: `Hash[String, Data]`

Additional arguments to pass to the controller manager.

Default value: `{}`

##### <a name="-k8s--server--controller_manager--ca_cert"></a>`ca_cert`

Data type: `Stdlib::Unixpath`

The path to the CA certificate.

Default value: `$k8s::server::tls::ca_cert`

##### <a name="-k8s--server--controller_manager--ca_key"></a>`ca_key`

Data type: `Stdlib::Unixpath`

The path to the CA key.

Default value: `$k8s::server::tls::ca_key`

##### <a name="-k8s--server--controller_manager--cert"></a>`cert`

Data type: `Stdlib::Unixpath`

The path to the controller manager certificate.

Default value: `"${cert_path}/kube-controller-manager.pem"`

##### <a name="-k8s--server--controller_manager--cert_path"></a>`cert_path`

Data type: `Stdlib::Unixpath`

The path to the TLS certificates.

Default value: `$k8s::server::tls::cert_path`

##### <a name="-k8s--server--controller_manager--cluster_cidr"></a>`cluster_cidr`

Data type: `K8s::CIDR`

The CIDR of the cluster.

Default value: `$k8s::cluster_cidr`

##### <a name="-k8s--server--controller_manager--container_image"></a>`container_image`

Data type: `String[1]`

The container image to use for the controller manager.

Default value: `'kube-controller-manager'`

##### <a name="-k8s--server--controller_manager--container_image_tag"></a>`container_image_tag`

Data type: `Optional[String[1]]`

The container image tag to use for the controller manager.

Default value: `$k8s::container_image_tag`

##### <a name="-k8s--server--controller_manager--container_registry"></a>`container_registry`

Data type: `String[1]`

The container registry to pull the controller manager image from.

Default value: `$k8s::container_registry`

##### <a name="-k8s--server--controller_manager--control_plane_url"></a>`control_plane_url`

Data type: `Stdlib::HTTPUrl`

The URL of the Kubernetes API server.

Default value: `$k8s::control_plane_url`

##### <a name="-k8s--server--controller_manager--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether the controller manager should be configured.

Default value: `$k8s::server::ensure`

##### <a name="-k8s--server--controller_manager--key"></a>`key`

Data type: `Stdlib::Unixpath`

The path to the controller manager key.

Default value: `"${cert_path}/kube-controller-manager.key"`

##### <a name="-k8s--server--controller_manager--service_cluster_cidr"></a>`service_cluster_cidr`

Data type: `K8s::CIDR`

The CIDR of the service cluster.

Default value: `$k8s::service_cluster_cidr`

### <a name="k8s--server--etcd"></a>`k8s::server::etcd`

Sets up an etcd cluster node

#### Parameters

The following parameters are available in the `k8s::server::etcd` class:

* [`addn_names`](#-k8s--server--etcd--addn_names)
* [`cert_path`](#-k8s--server--etcd--cert_path)
* [`client_ca_cert`](#-k8s--server--etcd--client_ca_cert)
* [`client_ca_key`](#-k8s--server--etcd--client_ca_key)
* [`cluster_name`](#-k8s--server--etcd--cluster_name)
* [`ensure`](#-k8s--server--etcd--ensure)
* [`firewall_type`](#-k8s--server--etcd--firewall_type)
* [`generate_ca`](#-k8s--server--etcd--generate_ca)
* [`group`](#-k8s--server--etcd--group)
* [`manage_certs`](#-k8s--server--etcd--manage_certs)
* [`manage_firewall`](#-k8s--server--etcd--manage_firewall)
* [`manage_members`](#-k8s--server--etcd--manage_members)
* [`manage_setup`](#-k8s--server--etcd--manage_setup)
* [`peer_ca_cert`](#-k8s--server--etcd--peer_ca_cert)
* [`peer_ca_key`](#-k8s--server--etcd--peer_ca_key)
* [`puppetdb_discovery_tag`](#-k8s--server--etcd--puppetdb_discovery_tag)
* [`self_signed_tls`](#-k8s--server--etcd--self_signed_tls)
* [`user`](#-k8s--server--etcd--user)
* [`version`](#-k8s--server--etcd--version)

##### <a name="-k8s--server--etcd--addn_names"></a>`addn_names`

Data type: `K8s::TLS_altnames`

additional names for certificates

Default value: `[]`

##### <a name="-k8s--server--etcd--cert_path"></a>`cert_path`

Data type: `Stdlib::Unixpath`

path to cert files

Default value: `'/var/lib/etcd/certs'`

##### <a name="-k8s--server--etcd--client_ca_cert"></a>`client_ca_cert`

Data type: `Stdlib::Unixpath`

path to the client ca cert

Default value: `"${cert_path}/client-ca.pem"`

##### <a name="-k8s--server--etcd--client_ca_key"></a>`client_ca_key`

Data type: `Stdlib::Unixpath`

path to the client ca key

Default value: `"${cert_path}/client-ca.key"`

##### <a name="-k8s--server--etcd--cluster_name"></a>`cluster_name`

Data type: `String[1]`

name of the etcd cluster for searching its nodes in the puppetdb

Default value: `pick($k8s::server::etcd_cluster_name, 'default')`

##### <a name="-k8s--server--etcd--ensure"></a>`ensure`

Data type: `K8s::Ensure`

set ensure for installation or deinstallation

Default value: `'present'`

##### <a name="-k8s--server--etcd--firewall_type"></a>`firewall_type`

Data type: `Optional[K8s::Firewall]`

define the type of firewall to use

Default value: `$k8s::server::firewall_type`

##### <a name="-k8s--server--etcd--generate_ca"></a>`generate_ca`

Data type: `Boolean`

whether to generate a own ca or not

Default value: `false`

##### <a name="-k8s--server--etcd--group"></a>`group`

Data type: `String[1]`

group to run etcd as

Default value: `'etcd'`

##### <a name="-k8s--server--etcd--manage_certs"></a>`manage_certs`

Data type: `Boolean`

whether to manage certs or not

Default value: `true`

##### <a name="-k8s--server--etcd--manage_firewall"></a>`manage_firewall`

Data type: `Boolean`

whether to manage firewall or not

Default value: `false`

##### <a name="-k8s--server--etcd--manage_members"></a>`manage_members`

Data type: `Boolean`

whether to manage the ectd cluster member joining or not

Default value: `false`

##### <a name="-k8s--server--etcd--manage_setup"></a>`manage_setup`

Data type: `Boolean`

whether to manage the setup of etcd or not

Default value: `true`

##### <a name="-k8s--server--etcd--peer_ca_cert"></a>`peer_ca_cert`

Data type: `Stdlib::Unixpath`

path to the peer ca cert

Default value: `"${cert_path}/peer-ca.pem"`

##### <a name="-k8s--server--etcd--peer_ca_key"></a>`peer_ca_key`

Data type: `Stdlib::Unixpath`

path to the peer ca key

Default value: `"${cert_path}/peer-ca.key"`

##### <a name="-k8s--server--etcd--puppetdb_discovery_tag"></a>`puppetdb_discovery_tag`

Data type: `String[1]`

enable puppetdb resource searching

Default value: `pick($k8s::server::puppetdb_discovery_tag, $cluster_name)`

##### <a name="-k8s--server--etcd--self_signed_tls"></a>`self_signed_tls`

Data type: `Boolean`

whether to use self signed tls or not

Default value: `false`

##### <a name="-k8s--server--etcd--user"></a>`user`

Data type: `String[1]`

user to run etcd as

Default value: `'etcd'`

##### <a name="-k8s--server--etcd--version"></a>`version`

Data type: `String[1]`

version of ectd to install

Default value: `pick($k8s::etcd_version, '3.5.1')`

### <a name="k8s--server--etcd--setup"></a>`k8s::server::etcd::setup`

Installs and configures an etcd instance

#### Parameters

The following parameters are available in the `k8s::server::etcd::setup` class:

* [`advertise_client_urls`](#-k8s--server--etcd--setup--advertise_client_urls)
* [`archive_template`](#-k8s--server--etcd--setup--archive_template)
* [`auto_compaction_retention`](#-k8s--server--etcd--setup--auto_compaction_retention)
* [`auto_tls`](#-k8s--server--etcd--setup--auto_tls)
* [`binary_path`](#-k8s--server--etcd--setup--binary_path)
* [`cert_file`](#-k8s--server--etcd--setup--cert_file)
* [`client_cert_auth`](#-k8s--server--etcd--setup--client_cert_auth)
* [`data_dir`](#-k8s--server--etcd--setup--data_dir)
* [`ensure`](#-k8s--server--etcd--setup--ensure)
* [`etcd_name`](#-k8s--server--etcd--setup--etcd_name)
* [`fqdn`](#-k8s--server--etcd--setup--fqdn)
* [`gid`](#-k8s--server--etcd--setup--gid)
* [`group`](#-k8s--server--etcd--setup--group)
* [`initial_advertise_peer_urls`](#-k8s--server--etcd--setup--initial_advertise_peer_urls)
* [`initial_cluster`](#-k8s--server--etcd--setup--initial_cluster)
* [`initial_cluster_state`](#-k8s--server--etcd--setup--initial_cluster_state)
* [`initial_cluster_token`](#-k8s--server--etcd--setup--initial_cluster_token)
* [`install`](#-k8s--server--etcd--setup--install)
* [`key_file`](#-k8s--server--etcd--setup--key_file)
* [`listen_client_urls`](#-k8s--server--etcd--setup--listen_client_urls)
* [`listen_peer_urls`](#-k8s--server--etcd--setup--listen_peer_urls)
* [`package`](#-k8s--server--etcd--setup--package)
* [`peer_auto_tls`](#-k8s--server--etcd--setup--peer_auto_tls)
* [`peer_cert_file`](#-k8s--server--etcd--setup--peer_cert_file)
* [`peer_client_cert_auth`](#-k8s--server--etcd--setup--peer_client_cert_auth)
* [`peer_key_file`](#-k8s--server--etcd--setup--peer_key_file)
* [`peer_trusted_ca_file`](#-k8s--server--etcd--setup--peer_trusted_ca_file)
* [`proxy`](#-k8s--server--etcd--setup--proxy)
* [`storage_path`](#-k8s--server--etcd--setup--storage_path)
* [`trusted_ca_file`](#-k8s--server--etcd--setup--trusted_ca_file)
* [`uid`](#-k8s--server--etcd--setup--uid)
* [`user`](#-k8s--server--etcd--setup--user)
* [`version`](#-k8s--server--etcd--setup--version)

##### <a name="-k8s--server--etcd--setup--advertise_client_urls"></a>`advertise_client_urls`

Data type: `Array[Stdlib::HTTPUrl]`

The client urls to advertise

Default value: `["https://${fqdn}:2379"]`

##### <a name="-k8s--server--etcd--setup--archive_template"></a>`archive_template`

Data type: `Stdlib::HTTPUrl`

The download url template for the etc archive

Default value: `'https://storage.googleapis.com/etcd/v%{version}/etcd-v%{version}-%{kernel}-%{arch}.%{kernel_ext}'`

##### <a name="-k8s--server--etcd--setup--auto_compaction_retention"></a>`auto_compaction_retention`

Data type: `Optional[Integer]`

The auto compaction retention

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--auto_tls"></a>`auto_tls`

Data type: `Boolean`

Use auto tls

Default value: `$k8s::server::etcd::self_signed_tls`

##### <a name="-k8s--server--etcd--setup--binary_path"></a>`binary_path`

Data type: `Optional[Stdlib::Unixpath]`

path to the etcd binary

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--cert_file"></a>`cert_file`

Data type: `Optional[Stdlib::Unixpath]`

path to the cert file

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--client_cert_auth"></a>`client_cert_auth`

Data type: `Boolean`

Use client cert auth

Default value: `false`

##### <a name="-k8s--server--etcd--setup--data_dir"></a>`data_dir`

Data type: `String[1]`

path to the data dir

Default value: `"${etcd_name}.etcd"`

##### <a name="-k8s--server--etcd--setup--ensure"></a>`ensure`

Data type: `K8s::Ensure`

set ensure for installation or deinstallation

Default value: `$k8s::server::etcd::ensure`

##### <a name="-k8s--server--etcd--setup--etcd_name"></a>`etcd_name`

Data type: `String[1]`

The etcd instance name

Default value: `$facts['networking']['hostname']`

##### <a name="-k8s--server--etcd--setup--fqdn"></a>`fqdn`

Data type: `String[1]`

fully qualified domain name

Default value: `$facts['networking']['fqdn']`

##### <a name="-k8s--server--etcd--setup--gid"></a>`gid`

Data type: `Optional[Integer[0, 65535]]`

The group system id

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--group"></a>`group`

Data type: `String[1]`

etcd system user group

Default value: `$k8s::server::etcd::group`

##### <a name="-k8s--server--etcd--setup--initial_advertise_peer_urls"></a>`initial_advertise_peer_urls`

Data type: `Array[Stdlib::HTTPUrl]`

The peer urls to advertise

Default value: `["https://${fqdn}:2380"]`

##### <a name="-k8s--server--etcd--setup--initial_cluster"></a>`initial_cluster`

Data type: `Array[String[1]]`

The initial cluster

Default value: `[]`

##### <a name="-k8s--server--etcd--setup--initial_cluster_state"></a>`initial_cluster_state`

Data type: `Optional[Enum['existing', 'new']]`

The initial cluster state

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--initial_cluster_token"></a>`initial_cluster_token`

Data type: `Optional[String[1]]`

The initial cluster token

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--install"></a>`install`

Data type: `Enum['archive','package']`

etcd installation method

Default value: `'archive'`

##### <a name="-k8s--server--etcd--setup--key_file"></a>`key_file`

Data type: `Optional[Stdlib::Unixpath]`

path to the key file

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--listen_client_urls"></a>`listen_client_urls`

Data type: `Array[Stdlib::HTTPUrl]`

The client urls to listen on

Default value: `['https://[::]:2379']`

##### <a name="-k8s--server--etcd--setup--listen_peer_urls"></a>`listen_peer_urls`

Data type: `Array[Stdlib::HTTPUrl]`

The peer urls to listen on

Default value: `['https://[::]:2380']`

##### <a name="-k8s--server--etcd--setup--package"></a>`package`

Data type: `String[1]`

etcd package name

Default value: `'etcd'`

##### <a name="-k8s--server--etcd--setup--peer_auto_tls"></a>`peer_auto_tls`

Data type: `Boolean`

Use peer auto tls

Default value: `$k8s::server::etcd::self_signed_tls`

##### <a name="-k8s--server--etcd--setup--peer_cert_file"></a>`peer_cert_file`

Data type: `Optional[Stdlib::Unixpath]`

path to the peer cert file

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--peer_client_cert_auth"></a>`peer_client_cert_auth`

Data type: `Boolean`

Use peer client cert auth

Default value: `false`

##### <a name="-k8s--server--etcd--setup--peer_key_file"></a>`peer_key_file`

Data type: `Optional[Stdlib::Unixpath]`

path to the peer key file

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--peer_trusted_ca_file"></a>`peer_trusted_ca_file`

Data type: `Optional[Stdlib::Unixpath]`

path to the peer trusted ca file

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--proxy"></a>`proxy`

Data type: `Enum['on','off','readonly']`

The proxy mode

Default value: `'off'`

##### <a name="-k8s--server--etcd--setup--storage_path"></a>`storage_path`

Data type: `Stdlib::Unixpath`

path to the working dir of etcd

Default value: `'/var/lib/etcd'`

##### <a name="-k8s--server--etcd--setup--trusted_ca_file"></a>`trusted_ca_file`

Data type: `Optional[Stdlib::Unixpath]`

path to the trusted ca file

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--uid"></a>`uid`

Data type: `Optional[Integer[0, 65535]]`

The user system id

Default value: `undef`

##### <a name="-k8s--server--etcd--setup--user"></a>`user`

Data type: `String[1]`

etcd system user

Default value: `$k8s::server::etcd::user`

##### <a name="-k8s--server--etcd--setup--version"></a>`version`

Data type: `String[1]`

The ectd version to install

Default value: `$k8s::server::etcd::version`

### <a name="k8s--server--resources"></a>`k8s::server::resources`

Generates and deploys standard Kubernetes in-cluster services

#### Parameters

The following parameters are available in the `k8s::server::resources` class:

* [`ca_cert`](#-k8s--server--resources--ca_cert)
* [`cluster_cidr`](#-k8s--server--resources--cluster_cidr)
* [`cluster_domain`](#-k8s--server--resources--cluster_domain)
* [`control_plane_url`](#-k8s--server--resources--control_plane_url)
* [`coredns_deployment_config`](#-k8s--server--resources--coredns_deployment_config)
* [`coredns_image`](#-k8s--server--resources--coredns_image)
* [`coredns_registry`](#-k8s--server--resources--coredns_registry)
* [`coredns_tag`](#-k8s--server--resources--coredns_tag)
* [`dns_service_address`](#-k8s--server--resources--dns_service_address)
* [`extra_kube_proxy_args`](#-k8s--server--resources--extra_kube_proxy_args)
* [`flannel_cni_image`](#-k8s--server--resources--flannel_cni_image)
* [`flannel_cni_registry`](#-k8s--server--resources--flannel_cni_registry)
* [`flannel_cni_tag`](#-k8s--server--resources--flannel_cni_tag)
* [`flannel_daemonset_config`](#-k8s--server--resources--flannel_daemonset_config)
* [`flannel_image`](#-k8s--server--resources--flannel_image)
* [`flannel_registry`](#-k8s--server--resources--flannel_registry)
* [`flannel_tag`](#-k8s--server--resources--flannel_tag)
* [`image_pull_secrets`](#-k8s--server--resources--image_pull_secrets)
* [`kube_proxy_daemonset_config`](#-k8s--server--resources--kube_proxy_daemonset_config)
* [`kube_proxy_image`](#-k8s--server--resources--kube_proxy_image)
* [`kube_proxy_registry`](#-k8s--server--resources--kube_proxy_registry)
* [`kube_proxy_tag`](#-k8s--server--resources--kube_proxy_tag)
* [`kubeconfig`](#-k8s--server--resources--kubeconfig)
* [`manage_bootstrap`](#-k8s--server--resources--manage_bootstrap)
* [`manage_coredns`](#-k8s--server--resources--manage_coredns)
* [`manage_flannel`](#-k8s--server--resources--manage_flannel)
* [`manage_kube_proxy`](#-k8s--server--resources--manage_kube_proxy)

##### <a name="-k8s--server--resources--ca_cert"></a>`ca_cert`

Data type: `Stdlib::Unixpath`

the path to the CA certificate to use for the cluster

Default value: `$k8s::server::tls::ca_cert`

##### <a name="-k8s--server--resources--cluster_cidr"></a>`cluster_cidr`

Data type: `K8s::CIDR`

the CIDR to use for the cluster

Default value: `$k8s::server::cluster_cidr`

##### <a name="-k8s--server--resources--cluster_domain"></a>`cluster_domain`

Data type: `String[1]`

the domain to use for the cluster

Default value: `$k8s::server::cluster_domain`

##### <a name="-k8s--server--resources--control_plane_url"></a>`control_plane_url`

Data type: `String[1]`

the URL to use for the control plane

Default value: `$k8s::server::control_plane_url`

##### <a name="-k8s--server--resources--coredns_deployment_config"></a>`coredns_deployment_config`

Data type: `Hash[String,Data]`

the configuration to use for the CoreDNS Deployment

Default value: `{}`

##### <a name="-k8s--server--resources--coredns_image"></a>`coredns_image`

Data type: `String[1]`

the image to use for the CoreDNS

Default value: `'coredns/coredns'`

##### <a name="-k8s--server--resources--coredns_registry"></a>`coredns_registry`

Data type: `String[1]`

the registry to use for the CoreDNS image

Default value: `'docker.io'`

##### <a name="-k8s--server--resources--coredns_tag"></a>`coredns_tag`

Data type: `String[1]`

the tag to use for the CoreDNS image

Default value: `'1.8.7'`

##### <a name="-k8s--server--resources--dns_service_address"></a>`dns_service_address`

Data type: `K8s::IP_addresses`

the IP address to use for the DNS service

Default value: `$k8s::server::dns_service_address`

##### <a name="-k8s--server--resources--extra_kube_proxy_args"></a>`extra_kube_proxy_args`

Data type: `Hash[String,Data]`

the extra arguments to pass to the kube-proxy

Default value: `{}`

##### <a name="-k8s--server--resources--flannel_cni_image"></a>`flannel_cni_image`

Data type: `String[1]`

the image to use for the Flannel CNI

Default value: `'rancher/mirrored-flannelcni-flannel-cni-plugin'`

##### <a name="-k8s--server--resources--flannel_cni_registry"></a>`flannel_cni_registry`

Data type: `String[1]`

the registry to use for the Flannel CNI image

Default value: `'docker.io'`

##### <a name="-k8s--server--resources--flannel_cni_tag"></a>`flannel_cni_tag`

Data type: `String[1]`

the tag to use for the Flannel CNI image

Default value: `'v1.0.0'`

##### <a name="-k8s--server--resources--flannel_daemonset_config"></a>`flannel_daemonset_config`

Data type: `Hash[String,Data]`

the configuration to use for the Flannel DaemonSet

Default value: `{}`

##### <a name="-k8s--server--resources--flannel_image"></a>`flannel_image`

Data type: `String[1]`

the image to use for the Flannel

Default value: `'rancher/mirrored-flannelcni-flannel'`

##### <a name="-k8s--server--resources--flannel_registry"></a>`flannel_registry`

Data type: `String[1]`

the registry to use for the Flannel image

Default value: `'docker.io'`

##### <a name="-k8s--server--resources--flannel_tag"></a>`flannel_tag`

Data type: `String[1]`

the tag to use for the Flannel image

Default value: `'v0.16.1'`

##### <a name="-k8s--server--resources--image_pull_secrets"></a>`image_pull_secrets`

Data type: `Optional[Array]`

the secrets to pull from private registries

Default value: `undef`

##### <a name="-k8s--server--resources--kube_proxy_daemonset_config"></a>`kube_proxy_daemonset_config`

Data type: `Hash[String,Data]`

the configuration to use for the kube-proxy DaemonSet

Default value: `{}`

##### <a name="-k8s--server--resources--kube_proxy_image"></a>`kube_proxy_image`

Data type: `String[1]`

the image to use for the kube-proxy

Default value: `'kube-proxy'`

##### <a name="-k8s--server--resources--kube_proxy_registry"></a>`kube_proxy_registry`

Data type: `String[1]`

the registry to use for the kube-proxy image

Default value: `$k8s::container_registry`

##### <a name="-k8s--server--resources--kube_proxy_tag"></a>`kube_proxy_tag`

Data type: `String[1]`

the tag to use for the kube-proxy image

Default value: `"v${k8s::version}"`

##### <a name="-k8s--server--resources--kubeconfig"></a>`kubeconfig`

Data type: `Stdlib::Unixpath`

the path to the kubeconfig file to use for kubectl

Default value: `'/root/.kube/config'`

##### <a name="-k8s--server--resources--manage_bootstrap"></a>`manage_bootstrap`

Data type: `Boolean`

whether to manage the bootstrap resources

Default value: `true`

##### <a name="-k8s--server--resources--manage_coredns"></a>`manage_coredns`

Data type: `Boolean`

whether to manage the CoreDNS resources

Default value: `true`

##### <a name="-k8s--server--resources--manage_flannel"></a>`manage_flannel`

Data type: `Boolean`

whether to manage the Flannel resources

Default value: `true`

##### <a name="-k8s--server--resources--manage_kube_proxy"></a>`manage_kube_proxy`

Data type: `K8s::Proxy_method`

whether to manage the kube-proxy resources

Default value: `$k8s::manage_kube_proxy`

### <a name="k8s--server--resources--bootstrap"></a>`k8s::server::resources::bootstrap`

Generates and deploys the default Puppet boostrap configuration into the cluster

#### Parameters

The following parameters are available in the `k8s::server::resources::bootstrap` class:

* [`control_plane_url`](#-k8s--server--resources--bootstrap--control_plane_url)
* [`ensure`](#-k8s--server--resources--bootstrap--ensure)
* [`kubeconfig`](#-k8s--server--resources--bootstrap--kubeconfig)
* [`secret`](#-k8s--server--resources--bootstrap--secret)

##### <a name="-k8s--server--resources--bootstrap--control_plane_url"></a>`control_plane_url`

Data type: `String[1]`

The main API URL to encode in the bootstrap configuration

Default value: `$k8s::server::resources::control_plane_url`

##### <a name="-k8s--server--resources--bootstrap--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether the resources should be present or absent

Default value: `$k8s::ensure`

##### <a name="-k8s--server--resources--bootstrap--kubeconfig"></a>`kubeconfig`

Data type: `Stdlib::Unixpath`

The path to the kubeconfig file to use for the bootstrap configuration

Default value: `$k8s::server::resources::kubeconfig`

##### <a name="-k8s--server--resources--bootstrap--secret"></a>`secret`

Data type: `Optional[Sensitive[K8s::Bootstrap_token]]`

The exact token secret to use, will be generated as a random 16-char string if left blank.
The generated value can be retrieved from the bootstrap-token-puppet Secret in kube-system.

Default value: `undef`

### <a name="k8s--server--resources--coredns"></a>`k8s::server::resources::coredns`

Generates and deploys the default CoreDNS DNS provider for Kubernetes

#### Parameters

The following parameters are available in the `k8s::server::resources::coredns` class:

* [`cluster_domain`](#-k8s--server--resources--coredns--cluster_domain)
* [`corefile_content`](#-k8s--server--resources--coredns--corefile_content)
* [`deployment_config`](#-k8s--server--resources--coredns--deployment_config)
* [`dns_service_address`](#-k8s--server--resources--coredns--dns_service_address)
* [`ensure`](#-k8s--server--resources--coredns--ensure)
* [`hosts`](#-k8s--server--resources--coredns--hosts)
* [`image`](#-k8s--server--resources--coredns--image)
* [`image_pull_secrets`](#-k8s--server--resources--coredns--image_pull_secrets)
* [`image_tag`](#-k8s--server--resources--coredns--image_tag)
* [`kubeconfig`](#-k8s--server--resources--coredns--kubeconfig)
* [`registry`](#-k8s--server--resources--coredns--registry)
* [`template_path`](#-k8s--server--resources--coredns--template_path)
* [`template_variables`](#-k8s--server--resources--coredns--template_variables)

##### <a name="-k8s--server--resources--coredns--cluster_domain"></a>`cluster_domain`

Data type: `Stdlib::Fqdn`

The cluster domain to use for the CoreDNS ConfigMap

Default value: `$k8s::server::resources::cluster_domain`

##### <a name="-k8s--server--resources--coredns--corefile_content"></a>`corefile_content`

Data type: `Optional[String[1]]`

The content to use for the CoreDNS ConfigMap

Default value: `undef`

##### <a name="-k8s--server--resources--coredns--deployment_config"></a>`deployment_config`

Data type: `Hash[String,Data]`

Additional configuration to merge into the Kubernetes Deployment object

Default value: `$k8s::server::resources::coredns_deployment_config`

##### <a name="-k8s--server--resources--coredns--dns_service_address"></a>`dns_service_address`

Data type: `K8s::IP_addresses`

The address for the DNS service

Default value: `$k8s::server::resources::dns_service_address`

##### <a name="-k8s--server--resources--coredns--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether the resource should be present or absent on the target system

Default value: `$k8s::ensure`

##### <a name="-k8s--server--resources--coredns--hosts"></a>`hosts`

Data type: `Array[String[1]]`

Additional host-style entries for the CoreDNS deployment to serve

Default value: `[]`

##### <a name="-k8s--server--resources--coredns--image"></a>`image`

Data type: `String[1]`

The CoreDNS image name to use

Default value: `$k8s::server::resources::coredns_image`

##### <a name="-k8s--server--resources--coredns--image_pull_secrets"></a>`image_pull_secrets`

Data type: `Optional[Array]`

the secrets to pull from private registries

Default value: `$k8s::server::resources::image_pull_secrets`

##### <a name="-k8s--server--resources--coredns--image_tag"></a>`image_tag`

Data type: `String[1]`

The CoreDNS image tag to use

Default value: `$k8s::server::resources::coredns_tag`

##### <a name="-k8s--server--resources--coredns--kubeconfig"></a>`kubeconfig`

Data type: `Stdlib::Unixpath`

The path to the kubeconfig to use for kubectl commands

Default value: `$k8s::server::resources::kubeconfig`

##### <a name="-k8s--server--resources--coredns--registry"></a>`registry`

Data type: `String[1]`

The CoreDNS image registry to use

Default value: `$k8s::server::resources::coredns_registry`

##### <a name="-k8s--server--resources--coredns--template_path"></a>`template_path`

Data type: `String[1]`

The path to the template to use for the CoreDNS ConfigMap

Default value: `'k8s/server/resources/coredns_corefile.epp'`

##### <a name="-k8s--server--resources--coredns--template_variables"></a>`template_variables`

Data type: `Hash[String, Any]`

The variables to use for the CoreDNS ConfigMap template

Default value: `{ cluster_domain => $cluster_domain }`

### <a name="k8s--server--resources--flannel"></a>`k8s::server::resources::flannel`

Generates and deploys the default CoreDNS DNS provider for Kubernetes

#### Parameters

The following parameters are available in the `k8s::server::resources::flannel` class:

* [`cluster_cidr`](#-k8s--server--resources--flannel--cluster_cidr)
* [`cni_image`](#-k8s--server--resources--flannel--cni_image)
* [`cni_image_tag`](#-k8s--server--resources--flannel--cni_image_tag)
* [`cni_registry`](#-k8s--server--resources--flannel--cni_registry)
* [`daemonset_config`](#-k8s--server--resources--flannel--daemonset_config)
* [`ensure`](#-k8s--server--resources--flannel--ensure)
* [`image`](#-k8s--server--resources--flannel--image)
* [`image_pull_secrets`](#-k8s--server--resources--flannel--image_pull_secrets)
* [`image_tag`](#-k8s--server--resources--flannel--image_tag)
* [`kubeconfig`](#-k8s--server--resources--flannel--kubeconfig)
* [`net_config`](#-k8s--server--resources--flannel--net_config)
* [`registry`](#-k8s--server--resources--flannel--registry)

##### <a name="-k8s--server--resources--flannel--cluster_cidr"></a>`cluster_cidr`

Data type: `K8s::CIDR`

The internal cluster CIDR to proxy for

Default value: `$k8s::server::resources::cluster_cidr`

##### <a name="-k8s--server--resources--flannel--cni_image"></a>`cni_image`

Data type: `String[1]`

The Flannel CNI plugin image name to use

Default value: `$k8s::server::resources::flannel_cni_image`

##### <a name="-k8s--server--resources--flannel--cni_image_tag"></a>`cni_image_tag`

Data type: `String[1]`

The Flannel CNI plugin image tag to use

Default value: `$k8s::server::resources::flannel_cni_tag`

##### <a name="-k8s--server--resources--flannel--cni_registry"></a>`cni_registry`

Data type: `String[1]`

The Flannel CNI plugin image registry to use

Default value: `$k8s::server::resources::flannel_cni_registry`

##### <a name="-k8s--server--resources--flannel--daemonset_config"></a>`daemonset_config`

Data type: `Hash[String,Data]`

Additional configuration to merge into the DaemonSet object

Default value: `$k8s::server::resources::flannel_daemonset_config`

##### <a name="-k8s--server--resources--flannel--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether the resource should be present or absent on the system

Default value: `$k8s::ensure`

##### <a name="-k8s--server--resources--flannel--image"></a>`image`

Data type: `String[1]`

The Flannel image name to use

Default value: `$k8s::server::resources::flannel_image`

##### <a name="-k8s--server--resources--flannel--image_pull_secrets"></a>`image_pull_secrets`

Data type: `Optional[Array]`

the secrets to pull from private registries

Default value: `$k8s::server::resources::image_pull_secrets`

##### <a name="-k8s--server--resources--flannel--image_tag"></a>`image_tag`

Data type: `String[1]`

The Flannel image tag to use

Default value: `$k8s::server::resources::flannel_tag`

##### <a name="-k8s--server--resources--flannel--kubeconfig"></a>`kubeconfig`

Data type: `Stdlib::Unixpath`

The path to the kubeconfig file to use

Default value: `$k8s::server::resources::kubeconfig`

##### <a name="-k8s--server--resources--flannel--net_config"></a>`net_config`

Data type: `Hash[String,Data]`

Additional configuration to merge into net-conf.json for Flannel

Default value: `{}`

##### <a name="-k8s--server--resources--flannel--registry"></a>`registry`

Data type: `String[1]`

The Flannel image registry to use

Default value: `$k8s::server::resources::flannel_registry`

### <a name="k8s--server--resources--kube_proxy"></a>`k8s::server::resources::kube_proxy`

Generates and deploys the default kube-proxy service for Kubernetes

#### Parameters

The following parameters are available in the `k8s::server::resources::kube_proxy` class:

* [`cluster_cidr`](#-k8s--server--resources--kube_proxy--cluster_cidr)
* [`daemonset_config`](#-k8s--server--resources--kube_proxy--daemonset_config)
* [`ensure`](#-k8s--server--resources--kube_proxy--ensure)
* [`extra_args`](#-k8s--server--resources--kube_proxy--extra_args)
* [`extra_config`](#-k8s--server--resources--kube_proxy--extra_config)
* [`image`](#-k8s--server--resources--kube_proxy--image)
* [`image_pull_secrets`](#-k8s--server--resources--kube_proxy--image_pull_secrets)
* [`image_tag`](#-k8s--server--resources--kube_proxy--image_tag)
* [`kubeconfig`](#-k8s--server--resources--kube_proxy--kubeconfig)
* [`registry`](#-k8s--server--resources--kube_proxy--registry)

##### <a name="-k8s--server--resources--kube_proxy--cluster_cidr"></a>`cluster_cidr`

Data type: `K8s::CIDR`

The internal cluster CIDR to proxy for

Default value: `$k8s::server::resources::cluster_cidr`

##### <a name="-k8s--server--resources--kube_proxy--daemonset_config"></a>`daemonset_config`

Data type: `Hash[String,Data]`

Additional configuration to merge into the DaemonSet object

Default value: `{}`

##### <a name="-k8s--server--resources--kube_proxy--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether the resource should be present or absent

Default value: `$k8s::ensure`

##### <a name="-k8s--server--resources--kube_proxy--extra_args"></a>`extra_args`

Data type: `Hash[String,Data]`

Additional arguments to specify to the kube-proxy application

Default value: `{}`

##### <a name="-k8s--server--resources--kube_proxy--extra_config"></a>`extra_config`

Data type: `Hash[String,Data]`

Additional configuration data to apply to the kube-proxy configuration file

Default value: `{}`

##### <a name="-k8s--server--resources--kube_proxy--image"></a>`image`

Data type: `String[1]`

The kube-proxy image name to use

Default value: `$k8s::server::resources::kube_proxy_image`

##### <a name="-k8s--server--resources--kube_proxy--image_pull_secrets"></a>`image_pull_secrets`

Data type: `Optional[Array]`

the secrets to pull from private registries

Default value: `$k8s::server::resources::image_pull_secrets`

##### <a name="-k8s--server--resources--kube_proxy--image_tag"></a>`image_tag`

Data type: `String[1]`

The kube-proxy image tag to use

Default value: `$k8s::server::resources::kube_proxy_tag`

##### <a name="-k8s--server--resources--kube_proxy--kubeconfig"></a>`kubeconfig`

Data type: `Stdlib::Unixpath`

The path to the kubeconfig file to use

Default value: `$k8s::server::resources::kubeconfig`

##### <a name="-k8s--server--resources--kube_proxy--registry"></a>`registry`

Data type: `String[1]`

The kube-proxy image registry to use

Default value: `$k8s::server::resources::kube_proxy_registry`

### <a name="k8s--server--scheduler"></a>`k8s::server::scheduler`

Installs and configures a Kubernetes scheduler

#### Parameters

The following parameters are available in the `k8s::server::scheduler` class:

* [`ensure`](#-k8s--server--scheduler--ensure)
* [`control_plane_url`](#-k8s--server--scheduler--control_plane_url)
* [`arguments`](#-k8s--server--scheduler--arguments)
* [`cert_path`](#-k8s--server--scheduler--cert_path)
* [`ca_cert`](#-k8s--server--scheduler--ca_cert)
* [`cert`](#-k8s--server--scheduler--cert)
* [`key`](#-k8s--server--scheduler--key)
* [`container_registry`](#-k8s--server--scheduler--container_registry)
* [`container_image`](#-k8s--server--scheduler--container_image)
* [`container_image_tag`](#-k8s--server--scheduler--container_image_tag)

##### <a name="-k8s--server--scheduler--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether the scheduler should be configured.

Default value: `$k8s::server::ensure`

##### <a name="-k8s--server--scheduler--control_plane_url"></a>`control_plane_url`

Data type: `Stdlib::HTTPUrl`

The URL of the Kubernetes API server.

Default value: `$k8s::control_plane_url`

##### <a name="-k8s--server--scheduler--arguments"></a>`arguments`

Data type: `Hash[String, Data]`

Additional arguments to pass to the scheduler.

Default value: `{}`

##### <a name="-k8s--server--scheduler--cert_path"></a>`cert_path`

Data type: `Stdlib::Unixpath`

The path to the directory containing the TLS certificates.

Default value: `$k8s::server::tls::cert_path`

##### <a name="-k8s--server--scheduler--ca_cert"></a>`ca_cert`

Data type: `Stdlib::Unixpath`

The path to the CA certificate.

Default value: `$k8s::server::tls::ca_cert`

##### <a name="-k8s--server--scheduler--cert"></a>`cert`

Data type: `Stdlib::Unixpath`

The path to the scheduler certificate.

Default value: `"${cert_path}/kube-scheduler.pem"`

##### <a name="-k8s--server--scheduler--key"></a>`key`

Data type: `Stdlib::Unixpath`

The path to the scheduler key.

Default value: `"${cert_path}/kube-scheduler.key"`

##### <a name="-k8s--server--scheduler--container_registry"></a>`container_registry`

Data type: `String[1]`

The container registry to pull images from.

Default value: `$k8s::container_registry`

##### <a name="-k8s--server--scheduler--container_image"></a>`container_image`

Data type: `String[1]`

The container image to use for the scheduler.

Default value: `'kube-scheduler'`

##### <a name="-k8s--server--scheduler--container_image_tag"></a>`container_image_tag`

Data type: `Optional[String[1]]`

The container image tag to use for the scheduler.

Default value: `$k8s::container_image_tag`

### <a name="k8s--server--tls"></a>`k8s::server::tls`

Generates the necessary Kubernetes certificates for a server

#### Parameters

The following parameters are available in the `k8s::server::tls` class:

* [`aggregator_ca_cert`](#-k8s--server--tls--aggregator_ca_cert)
* [`aggregator_ca_key`](#-k8s--server--tls--aggregator_ca_key)
* [`api_addn_names`](#-k8s--server--tls--api_addn_names)
* [`api_service_address`](#-k8s--server--tls--api_service_address)
* [`ca_cert`](#-k8s--server--tls--ca_cert)
* [`ca_key`](#-k8s--server--tls--ca_key)
* [`cert_path`](#-k8s--server--tls--cert_path)
* [`cluster_domain`](#-k8s--server--tls--cluster_domain)
* [`ensure`](#-k8s--server--tls--ensure)
* [`generate_ca`](#-k8s--server--tls--generate_ca)
* [`key_bits`](#-k8s--server--tls--key_bits)
* [`manage_certs`](#-k8s--server--tls--manage_certs)
* [`valid_days`](#-k8s--server--tls--valid_days)

##### <a name="-k8s--server--tls--aggregator_ca_cert"></a>`aggregator_ca_cert`

Data type: `Stdlib::Unixpath`

The path to the aggregator CA certificate

Default value: `$k8s::server::aggregator_ca_cert`

##### <a name="-k8s--server--tls--aggregator_ca_key"></a>`aggregator_ca_key`

Data type: `Stdlib::Unixpath`

The path to the aggregator CA key

Default value: `$k8s::server::aggregator_ca_key`

##### <a name="-k8s--server--tls--api_addn_names"></a>`api_addn_names`

Data type: `K8s::TLS_altnames`

Additional names to add to the API server certificate

Default value: `[]`

##### <a name="-k8s--server--tls--api_service_address"></a>`api_service_address`

Data type: `Stdlib::IP::Address::Nosubnet`

The API service address

Default value: `$k8s::api_service_address`

##### <a name="-k8s--server--tls--ca_cert"></a>`ca_cert`

Data type: `Stdlib::Unixpath`

The path to the CA certificate

Default value: `$k8s::server::ca_cert`

##### <a name="-k8s--server--tls--ca_key"></a>`ca_key`

Data type: `Stdlib::Unixpath`

The path to the CA key

Default value: `$k8s::server::ca_key`

##### <a name="-k8s--server--tls--cert_path"></a>`cert_path`

Data type: `Stdlib::Unixpath`

The path to the certificates

Default value: `$k8s::server::cert_path`

##### <a name="-k8s--server--tls--cluster_domain"></a>`cluster_domain`

Data type: `String[1]`

The cluster domain

Default value: `$k8s::cluster_domain`

##### <a name="-k8s--server--tls--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether to generate the certificates or not

Default value: `'present'`

##### <a name="-k8s--server--tls--generate_ca"></a>`generate_ca`

Data type: `Boolean`

Whether to generate the CA or not

Default value: `$k8s::server::generate_ca`

##### <a name="-k8s--server--tls--key_bits"></a>`key_bits`

Data type: `Integer[512]`

The number of bits to use for the key

Default value: `2048`

##### <a name="-k8s--server--tls--manage_certs"></a>`manage_certs`

Data type: `Boolean`

Whether to manage the certificates or not

Default value: `$k8s::server::manage_certs`

##### <a name="-k8s--server--tls--valid_days"></a>`valid_days`

Data type: `Integer[1]`

The number of days the certificate is valid for

Default value: `10000`

### <a name="k8s--server--wait_online"></a>`k8s::server::wait_online`

Creates a dummy exec to allow deferring applies until the Kubernetes API server has started

## Defined types

### <a name="k8s--binary"></a>`k8s::binary`

Deploys a Kubernetes binary

#### Parameters

The following parameters are available in the `k8s::binary` defined type:

* [`ensure`](#-k8s--binary--ensure)
* [`version`](#-k8s--binary--version)
* [`packaging`](#-k8s--binary--packaging)
* [`target`](#-k8s--binary--target)
* [`tarball_target`](#-k8s--binary--tarball_target)
* [`active`](#-k8s--binary--active)
* [`component`](#-k8s--binary--component)

##### <a name="-k8s--binary--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether the binary should be present or absent

Default value: `$k8s::ensure`

##### <a name="-k8s--binary--version"></a>`version`

Data type: `String[1]`

The version to deploy

Default value: `$k8s::version`

##### <a name="-k8s--binary--packaging"></a>`packaging`

Data type: `String[1]`

The packaging method to use

Default value: `$k8s::packaging`

##### <a name="-k8s--binary--target"></a>`target`

Data type: `String[1]`

The directory to deploy the binary to

Default value: `"/opt/k8s/${$version}"`

##### <a name="-k8s--binary--tarball_target"></a>`tarball_target`

Data type: `String[1]`

The directory to download tarballs to

Default value: `'/opt/k8s/archives'`

##### <a name="-k8s--binary--active"></a>`active`

Data type: `Boolean`

Whether the binary should be active

Default value: `true`

##### <a name="-k8s--binary--component"></a>`component`

Data type: `Optional[String]`

The component to deploy

Default value: `undef`

### <a name="k8s--server--bootstrap_token"></a>`k8s::server::bootstrap_token`

You generally only want this to be done on a single Kubernetes server

#### Parameters

The following parameters are available in the `k8s::server::bootstrap_token` defined type:

* [`addn_data`](#-k8s--server--bootstrap_token--addn_data)
* [`description`](#-k8s--server--bootstrap_token--description)
* [`ensure`](#-k8s--server--bootstrap_token--ensure)
* [`expiration`](#-k8s--server--bootstrap_token--expiration)
* [`extra_groups`](#-k8s--server--bootstrap_token--extra_groups)
* [`id`](#-k8s--server--bootstrap_token--id)
* [`kubeconfig`](#-k8s--server--bootstrap_token--kubeconfig)
* [`secret`](#-k8s--server--bootstrap_token--secret)
* [`update`](#-k8s--server--bootstrap_token--update)
* [`use_authentication`](#-k8s--server--bootstrap_token--use_authentication)
* [`use_signing`](#-k8s--server--bootstrap_token--use_signing)

##### <a name="-k8s--server--bootstrap_token--addn_data"></a>`addn_data`

Data type: `Hash[String,Data]`

Additional data to add to the token

Default value: `{}`

##### <a name="-k8s--server--bootstrap_token--description"></a>`description`

Data type: `Optional[String]`

A description of the token

Default value: `undef`

##### <a name="-k8s--server--bootstrap_token--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether the token should be present or absent

Default value: `'present'`

##### <a name="-k8s--server--bootstrap_token--expiration"></a>`expiration`

Data type: `Optional[K8s::Timestamp]`

The expiration time of the token

Default value: `undef`

##### <a name="-k8s--server--bootstrap_token--extra_groups"></a>`extra_groups`

Data type: `Optional[Array[String]]`

An array of extra groups to add to the token

Default value: `undef`

##### <a name="-k8s--server--bootstrap_token--id"></a>`id`

Data type: `Pattern[/^[a-z0-9]{6}$/]`

The ID of the token to generate

Default value: `$name`

##### <a name="-k8s--server--bootstrap_token--kubeconfig"></a>`kubeconfig`

Data type: `Stdlib::Unixpath`

The path to the kubeconfig file to use

##### <a name="-k8s--server--bootstrap_token--secret"></a>`secret`

Data type: `Sensitive[K8s::Bootstrap_token]`

The secret to use for the token

Default value: `Sensitive(fqdn_rand_string(16).downcase())`

##### <a name="-k8s--server--bootstrap_token--update"></a>`update`

Data type: `Boolean`

Whether to update the token if it already exists

Default value: `false`

##### <a name="-k8s--server--bootstrap_token--use_authentication"></a>`use_authentication`

Data type: `Boolean`

Whether the token should be used for authentication

Default value: `true`

##### <a name="-k8s--server--bootstrap_token--use_signing"></a>`use_signing`

Data type: `Optional[Boolean]`

Whether the token should be used for signing

Default value: `undef`

### <a name="k8s--server--etcd--member"></a>`k8s::server::etcd::member`

TODO - Convert to native type

#### Parameters

The following parameters are available in the `k8s::server::etcd::member` defined type:

* [`cluster_ca`](#-k8s--server--etcd--member--cluster_ca)
* [`cluster_cert`](#-k8s--server--etcd--member--cluster_cert)
* [`cluster_key`](#-k8s--server--etcd--member--cluster_key)
* [`cluster_urls`](#-k8s--server--etcd--member--cluster_urls)
* [`peer_urls`](#-k8s--server--etcd--member--peer_urls)

##### <a name="-k8s--server--etcd--member--cluster_ca"></a>`cluster_ca`

Data type: `Optional[Stdlib::Unixpath]`

The cluster CA for the new member

Default value: `undef`

##### <a name="-k8s--server--etcd--member--cluster_cert"></a>`cluster_cert`

Data type: `Optional[Stdlib::Unixpath]`

The cluster cert for the new member

Default value: `undef`

##### <a name="-k8s--server--etcd--member--cluster_key"></a>`cluster_key`

Data type: `Optional[Stdlib::Unixpath]`

The cluster key for the new member

Default value: `undef`

##### <a name="-k8s--server--etcd--member--cluster_urls"></a>`cluster_urls`

Data type: `Optional[Array[Stdlib::HTTPUrl]]`

The cluster URLs for the new member

Default value: `undef`

##### <a name="-k8s--server--etcd--member--peer_urls"></a>`peer_urls`

Data type: `Array[String, 1]`

The peer URLs for the new member

### <a name="k8s--server--tls--ca"></a>`k8s::server::tls::ca`

Generates a TLS CA

#### Parameters

The following parameters are available in the `k8s::server::tls::ca` defined type:

* [`key`](#-k8s--server--tls--ca--key)
* [`cert`](#-k8s--server--tls--ca--cert)
* [`ensure`](#-k8s--server--tls--ca--ensure)
* [`subject`](#-k8s--server--tls--ca--subject)
* [`owner`](#-k8s--server--tls--ca--owner)
* [`group`](#-k8s--server--tls--ca--group)
* [`key_bits`](#-k8s--server--tls--ca--key_bits)
* [`valid_days`](#-k8s--server--tls--ca--valid_days)
* [`generate`](#-k8s--server--tls--ca--generate)

##### <a name="-k8s--server--tls--ca--key"></a>`key`

Data type: `Stdlib::Unixpath`

The path to the CA key

##### <a name="-k8s--server--tls--ca--cert"></a>`cert`

Data type: `Stdlib::Unixpath`

The path to the CA certificate

##### <a name="-k8s--server--tls--ca--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether the CA should be present or absent

Default value: `present`

##### <a name="-k8s--server--tls--ca--subject"></a>`subject`

Data type: `String[1]`

The subject of the CA certificate

Default value: `"/CN=${title}"`

##### <a name="-k8s--server--tls--ca--owner"></a>`owner`

Data type: `String[1]`

The owner of the CA key and certificate

Default value: `'root'`

##### <a name="-k8s--server--tls--ca--group"></a>`group`

Data type: `String[1]`

The group of the CA key and certificate

Default value: `'root'`

##### <a name="-k8s--server--tls--ca--key_bits"></a>`key_bits`

Data type: `Integer[512]`

The number of bits in the CA key

Default value: `2048`

##### <a name="-k8s--server--tls--ca--valid_days"></a>`valid_days`

Data type: `Integer[1]`

The number of days the CA certificate is valid

Default value: `10000`

##### <a name="-k8s--server--tls--ca--generate"></a>`generate`

Data type: `Boolean`

Whether to generate the CA key and certificate

Default value: `true`

### <a name="k8s--server--tls--cert"></a>`k8s::server::tls::cert`

Generates and signs a TLS certificate

#### Parameters

The following parameters are available in the `k8s::server::tls::cert` defined type:

* [`addn_names`](#-k8s--server--tls--cert--addn_names)
* [`ca_cert`](#-k8s--server--tls--cert--ca_cert)
* [`ca_key`](#-k8s--server--tls--cert--ca_key)
* [`cert`](#-k8s--server--tls--cert--cert)
* [`cert_path`](#-k8s--server--tls--cert--cert_path)
* [`config`](#-k8s--server--tls--cert--config)
* [`csr`](#-k8s--server--tls--cert--csr)
* [`distinguished_name`](#-k8s--server--tls--cert--distinguished_name)
* [`ensure`](#-k8s--server--tls--cert--ensure)
* [`extended_key_usage`](#-k8s--server--tls--cert--extended_key_usage)
* [`group`](#-k8s--server--tls--cert--group)
* [`key`](#-k8s--server--tls--cert--key)
* [`key_bits`](#-k8s--server--tls--cert--key_bits)
* [`owner`](#-k8s--server--tls--cert--owner)
* [`valid_days`](#-k8s--server--tls--cert--valid_days)

##### <a name="-k8s--server--tls--cert--addn_names"></a>`addn_names`

Data type: `K8s::TLS_altnames`

The additional names for the certificate

Default value: `[]`

##### <a name="-k8s--server--tls--cert--ca_cert"></a>`ca_cert`

Data type: `Stdlib::Unixpath`

The path to the CA certificate

##### <a name="-k8s--server--tls--cert--ca_key"></a>`ca_key`

Data type: `Stdlib::Unixpath`

The path to the CA key

##### <a name="-k8s--server--tls--cert--cert"></a>`cert`

Data type: `Stdlib::Unixpath`

The path to the certificate file

Default value: `"${cert_path}/${title}.pem"`

##### <a name="-k8s--server--tls--cert--cert_path"></a>`cert_path`

Data type: `Stdlib::Unixpath`

The path to the directory where the certificate will be stored

##### <a name="-k8s--server--tls--cert--config"></a>`config`

Data type: `Stdlib::Unixpath`

The path to the OpenSSL config file

Default value: `"${cert_path}/${title}.cnf"`

##### <a name="-k8s--server--tls--cert--csr"></a>`csr`

Data type: `Stdlib::Unixpath`

The path to the CSR file

Default value: `"${cert_path}/${title}.csr"`

##### <a name="-k8s--server--tls--cert--distinguished_name"></a>`distinguished_name`

Data type: `Hash[String, String]`

The distinguished name for the certificate

##### <a name="-k8s--server--tls--cert--ensure"></a>`ensure`

Data type: `K8s::Ensure`

Whether the certificate should be present or absent

Default value: `present`

##### <a name="-k8s--server--tls--cert--extended_key_usage"></a>`extended_key_usage`

Data type: `K8s::Extended_key_usage`

The extended key usage for the certificate

Default value: `['clientAuth']`

##### <a name="-k8s--server--tls--cert--group"></a>`group`

Data type: `String[1]`

The group of the certificate files

Default value: `'root'`

##### <a name="-k8s--server--tls--cert--key"></a>`key`

Data type: `Stdlib::Unixpath`

The path to the key file

Default value: `"${cert_path}/${title}.key"`

##### <a name="-k8s--server--tls--cert--key_bits"></a>`key_bits`

Data type: `Integer[512]`

The number of bits in the key

Default value: `2048`

##### <a name="-k8s--server--tls--cert--owner"></a>`owner`

Data type: `String[1]`

The owner of the certificate files

Default value: `'root'`

##### <a name="-k8s--server--tls--cert--valid_days"></a>`valid_days`

Data type: `Integer[1]`

The number of days the certificate should be valid

Default value: `10000`

### <a name="k8s--server--tls--k8s_sign"></a>`k8s::server::tls::k8s_sign`

TODO - This should probably be done as a service next to the apiservers

#### Parameters

The following parameters are available in the `k8s::server::tls::k8s_sign` defined type:

* [`kubeconfig`](#-k8s--server--tls--k8s_sign--kubeconfig)

##### <a name="-k8s--server--tls--k8s_sign--kubeconfig"></a>`kubeconfig`

Data type: `Any`

Path to the kubeconfig file

Default value: `'/root/.kube/config'`

## Resource types

### <a name="kubeconfig"></a>`kubeconfig`

Example:

kubeconfig { '/var/lib/kubernetes/utility.conf':
  ca_cert => '/etc/kubernetes.ca.pem',
  token   => 'utility-token',
}

#### Properties

The following properties are available in the `kubeconfig` type.

##### `ensure`

Valid values: `present`, `absent`

Whether the kubeconfig should be present or absent (default: present)

Default value: `present`

#### Parameters

The following parameters are available in the `kubeconfig` type.

* [`ca_cert`](#-kubeconfig--ca_cert)
* [`client_cert`](#-kubeconfig--client_cert)
* [`client_key`](#-kubeconfig--client_key)
* [`cluster`](#-kubeconfig--cluster)
* [`context`](#-kubeconfig--context)
* [`current_context`](#-kubeconfig--current_context)
* [`embed_certs`](#-kubeconfig--embed_certs)
* [`group`](#-kubeconfig--group)
* [`mode`](#-kubeconfig--mode)
* [`namespace`](#-kubeconfig--namespace)
* [`owner`](#-kubeconfig--owner)
* [`password`](#-kubeconfig--password)
* [`path`](#-kubeconfig--path)
* [`provider`](#-kubeconfig--provider)
* [`server`](#-kubeconfig--server)
* [`skip_tls_verify`](#-kubeconfig--skip_tls_verify)
* [`tls_server_name`](#-kubeconfig--tls_server_name)
* [`token`](#-kubeconfig--token)
* [`token_file`](#-kubeconfig--token_file)
* [`user`](#-kubeconfig--user)
* [`username`](#-kubeconfig--username)

##### <a name="-kubeconfig--ca_cert"></a>`ca_cert`

The path to a CA certificate to include in the kubeconfig

##### <a name="-kubeconfig--client_cert"></a>`client_cert`

The path to a client certificate to include in the kubeconfig

##### <a name="-kubeconfig--client_key"></a>`client_key`

The path to a client key to include in the kubeconfig

##### <a name="-kubeconfig--cluster"></a>`cluster`

The name of the cluster to manage in the kubeconfig file

Default value: `default`

##### <a name="-kubeconfig--context"></a>`context`

The name of the cluster to manage in the kubeconfig file

Default value: `default`

##### <a name="-kubeconfig--current_context"></a>`current_context`

The current context to set

##### <a name="-kubeconfig--embed_certs"></a>`embed_certs`

Valid values: `true`, `false`

Should the certificate files be embedded into the kubeconfig file

Default value: `true`

##### <a name="-kubeconfig--group"></a>`group`

The owner of the kubeconfig file

##### <a name="-kubeconfig--mode"></a>`mode`

The access mode of the kubeconfig file

Default value: `0600`

##### <a name="-kubeconfig--namespace"></a>`namespace`

The namespace to default to

Default value: `default`

##### <a name="-kubeconfig--owner"></a>`owner`

The owner of the kubeconfig file

##### <a name="-kubeconfig--password"></a>`password`

The password of a user

##### <a name="-kubeconfig--path"></a>`path`

An arbitrary path used as the identity of the resource.

##### <a name="-kubeconfig--provider"></a>`provider`

The specific backend to use for this `kubeconfig` resource. You will seldom need to specify this --- Puppet will usually
discover the appropriate provider for your platform.

##### <a name="-kubeconfig--server"></a>`server`

The server URL for the cluster

##### <a name="-kubeconfig--skip_tls_verify"></a>`skip_tls_verify`

Valid values: `true`, `false`

Skip verifying the TLS certs for the cluster

Default value: `false`

##### <a name="-kubeconfig--tls_server_name"></a>`tls_server_name`

Specify an alternate server name to use for TLS verification

##### <a name="-kubeconfig--token"></a>`token`

An authentication token for a user

##### <a name="-kubeconfig--token_file"></a>`token_file`

The path to a file containing an authentication token

##### <a name="-kubeconfig--user"></a>`user`

The name of the user to manage in the kubeconfig file

Default value: `default`

##### <a name="-kubeconfig--username"></a>`username`

The username of a user

### <a name="kubectl_apply"></a>`kubectl_apply`

Example:

To encode the bootstrap token "tokenid.tokensecret" into a Kubernetes secret;

    $tokenid = 'tokenid'
    $tokensecret = 'tokensecret'
    kubectl_apply { "bootstrap-token-${tokenid}":
      namespace   => 'kube-system',
      kubeconfig  => '/root/.kube/config',

      api_version => 'v1,
      kind        => 'Secret',

      content     => {
        type => 'bootstrap.kubernetes.io/token',
        data => {
          'token-id'                       => Binary.new($tokenid, '%s'),
          'token-secret'                   => Binary.new($tokensecret, '%s'),
          'usage-bootstrap-authentication' => 'true',
        },
      },
    }

#### Properties

The following properties are available in the `kubectl_apply` type.

##### `ensure`

Valid values: `present`, `absent`

Whether the described resource should be present or absent (default: present)

Default value: `present`

#### Parameters

The following parameters are available in the `kubectl_apply` type.

* [`api_version`](#-kubectl_apply--api_version)
* [`content`](#-kubectl_apply--content)
* [`file`](#-kubectl_apply--file)
* [`kind`](#-kubectl_apply--kind)
* [`kubeconfig`](#-kubectl_apply--kubeconfig)
* [`name`](#-kubectl_apply--name)
* [`namespace`](#-kubectl_apply--namespace)
* [`provider`](#-kubectl_apply--provider)
* [`recreate`](#-kubectl_apply--recreate)
* [`resource_name`](#-kubectl_apply--resource_name)
* [`show_diff`](#-kubectl_apply--show_diff)
* [`update`](#-kubectl_apply--update)

##### <a name="-kubectl_apply--api_version"></a>`api_version`

The apiVersion of the resource

##### <a name="-kubectl_apply--content"></a>`content`

The resource content, will be used as the base for the resulting Kubernetes resource

Default value: `{}`

##### <a name="-kubectl_apply--file"></a>`file`

The local file for the resource

##### <a name="-kubectl_apply--kind"></a>`kind`

The kind of the resource

##### <a name="-kubectl_apply--kubeconfig"></a>`kubeconfig`

The kubeconfig file to use for handling the resource

##### <a name="-kubectl_apply--name"></a>`name`

namevar

The Puppet name of the instance

##### <a name="-kubectl_apply--namespace"></a>`namespace`

The namespace the resource is contained in

##### <a name="-kubectl_apply--provider"></a>`provider`

The specific backend to use for this `kubectl_apply` resource. You will seldom need to specify this --- Puppet will
usually discover the appropriate provider for your platform.

##### <a name="-kubectl_apply--recreate"></a>`recreate`

Valid values: `true`, `false`, `yes`, `no`

Should updates be done by removal and recreation

Default value: `false`

##### <a name="-kubectl_apply--resource_name"></a>`resource_name`

The name of the resource

##### <a name="-kubectl_apply--show_diff"></a>`show_diff`

Valid values: `true`, `false`, `yes`, `no`

Whether to display the difference when the resource changes

Default value: `false`

##### <a name="-kubectl_apply--update"></a>`update`

Valid values: `true`, `false`, `yes`, `no`

Whether to update the resource if the content differs

Default value: `true`

## Functions

### <a name="k8s--format_arguments"></a>`k8s::format_arguments`

Type: Ruby 4.x API

Formats a hash of arguments into something that can be passed to a kubernetes application

#### `k8s::format_arguments(Hash[String,Data] $arguments)`

Formats a hash of arguments into something that can be passed to a kubernetes application

Returns: `Array[String]` An array of formatted kubernetes arguments

##### `arguments`

Data type: `Hash[String,Data]`

A hash of arguments to format

### <a name="k8s--format_url"></a>`k8s::format_url`

Type: Ruby 4.x API

Formats a download URL for K8s binaries

#### `k8s::format_url(String[1] $url, Hash[String,Data] $components)`

Formats a download URL for K8s binaries

Returns: `Any` String A valid download URL

##### `url`

Data type: `String[1]`

The URL template to format

##### `components`

Data type: `Hash[String,Data]`

A hash of additional arguments

### <a name="k8s--ip_in_cidr"></a>`k8s::ip_in_cidr`

Type: Ruby 4.x API

Retrieves an IP inside of a CIDR based on an index

#### Examples

##### In 192.168.0.0/24

```puppet
k8s::ip_in_cidr('192.168.0.0/24', 'first')
# => 192.168.0.1
k8s::ip_in_cidr('192.168.0.0/24', 'second')
# => 192.168.0.2
k8s::ip_in_cidr('192.168.0.0/16', 600)
# => 192.168.1.244
```

#### `k8s::ip_in_cidr(Variant[Stdlib::IP::Address::V4::CIDR, Stdlib::IP::Address::V6::CIDR, Array[Variant[Stdlib::IP::Address::V4::CIDR, Stdlib::IP::Address::V6::CIDR]]] $cidr, Optional[Variant[Enum["first","second"], Integer[1]]] $index)`

Retrieves an IP inside of a CIDR based on an index

Returns: `String` The first IP address in the CIDR

##### Examples

###### In 192.168.0.0/24

```puppet
k8s::ip_in_cidr('192.168.0.0/24', 'first')
# => 192.168.0.1
k8s::ip_in_cidr('192.168.0.0/24', 'second')
# => 192.168.0.2
k8s::ip_in_cidr('192.168.0.0/16', 600)
# => 192.168.1.244
```

##### `cidr`

Data type: `Variant[Stdlib::IP::Address::V4::CIDR, Stdlib::IP::Address::V6::CIDR, Array[Variant[Stdlib::IP::Address::V4::CIDR, Stdlib::IP::Address::V6::CIDR]]]`

The CIDR to work on

##### `index`

Data type: `Optional[Variant[Enum["first","second"], Integer[1]]]`

The index of the IP to retrieve

## Data types

### <a name="K8s--Bootstrap_token"></a>`K8s::Bootstrap_token`

A Kubernetes bootstrap token, must be 16-characters lowercase alphanumerical

Alias of `Pattern[/\A[a-z0-9]{16}\z/]`

### <a name="K8s--CIDR"></a>`K8s::CIDR`

a type to describe one or more IPv4/6 CIDR

Alias of

```puppet
Variant[Stdlib::IP::Address::V4::CIDR, Stdlib::IP::Address::V6::CIDR, Array[
    Variant[
      Stdlib::IP::Address::V4::CIDR,
      Stdlib::IP::Address::V6::CIDR
    ],
    1
  ]]
```

### <a name="K8s--Container_runtimes"></a>`K8s::Container_runtimes`

a type to describe the supported container runtimes

Alias of `Enum['crio', 'containerd']`

### <a name="K8s--Duration"></a>`K8s::Duration`

https://golang.org/pkg/time/#ParseDuration

Alias of `Pattern[/^(-?[0-9]+(\.[0-9]+)?(ns|us|µs|ms|s|m|h))+$/]`

### <a name="K8s--Ensure"></a>`K8s::Ensure`

a type to describe the ensure pattern

Alias of `Enum['present', 'absent']`

### <a name="K8s--Extended_key_usage"></a>`K8s::Extended_key_usage`

a type to describe extended key usage for a TLS certificate

Alias of

```puppet
Array[Enum[
    'clientAuth',
    'serverAuth'
  ]]
```

### <a name="K8s--Firewall"></a>`K8s::Firewall`

a type to describe the type of the firewall to use

Alias of `Enum['iptables', 'firewalld']`

### <a name="K8s--IP_addresses"></a>`K8s::IP_addresses`

a type to describe multiple IP addresses without subnet sizes

Alias of

```puppet
Variant[Stdlib::IP::Address::Nosubnet, Array[
    Stdlib::IP::Address::Nosubnet,
    1
  ]]
```

### <a name="K8s--Native_packaging"></a>`K8s::Native_packaging`

a type to describe Kubernetes native packaging methods

* **Note** hyperkube is a legacy name for single-binary packages

Alias of `Enum['package', 'tarball', 'loose', 'hyperkube', 'manual']`

### <a name="K8s--Node_auth"></a>`K8s::Node_auth`

a type to describe node/kubelet authentication methods

Alias of `Enum['cert', 'token', 'bootstrap']`

### <a name="K8s--PortRange"></a>`K8s::PortRange`

This regexp matches port range values

Alias of `Pattern[/^[0-9]+(-[0-9]+)?$/]`

### <a name="K8s--Proxy_auth"></a>`K8s::Proxy_auth`

a type to describe kube-proxy authentication methods

Alias of `Enum['cert', 'token', 'incluster']`

### <a name="K8s--Proxy_method"></a>`K8s::Proxy_method`

a type to describe how kube-proxy should be deployed

Alias of

```puppet
Variant[Enum[
    'on-node',
    'in-cluster',
  ], Boolean]
```

### <a name="K8s--Quantity"></a>`K8s::Quantity`

This regexp matches quantities, like those for resource requests/limits

Alias of `Pattern[/^[+-]?([0-9]+|[0-9]+\.[0-9]{1,3}|\.[0-9]{1,3}|[0-9]+\.)([KMGTPE]i|[mkMGTPE]|[eE][0-9]+(\.[0-9]+)?)?$/]`

### <a name="K8s--TLS_altnames"></a>`K8s::TLS_altnames`

a type to describe TLS alternative names in certificates

Alias of

```puppet
Array[Variant[
    Stdlib::Fqdn,
    Stdlib::IP::Address::Nosubnet,
  ]]
```

### <a name="K8s--Timestamp"></a>`K8s::Timestamp`

This regexp matches RFC3339 timestamps, the same as what Kubernetes expects to find

Alias of `Pattern[/^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?([Zz]|[+-]([01][0-9]|2[0-3]):[0-5][0-9])$/]`

### <a name="K8s--URI"></a>`K8s::URI`

This regexp matches URI values

Alias of `Pattern[/^[a-z]+:\/\//]`

### <a name="K8s--Version"></a>`K8s::Version`

A type for handling Kubernetes version numbers

Alias of `Pattern[/^(\d+\.){2}\d+$/]`

